var tn=Object.defineProperty;var nn=(e,t,n)=>t in e?tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var R=(e,t,n)=>(nn(e,typeof t!="symbol"?t+"":t,n),n);import{i as Ze,r as Qe,T as on,v as rn,u as re,p as ue,j as M,F as ln,a as v,e as cn,c as sn,b as Ee,d as Be,t as et,f as tt,R as an}from"./jsx-runtime.js";var dn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};var ht={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(dn,function(){var n=1e3,o=6e4,i=36e5,l="millisecond",a="second",f="minute",u="hour",r="day",d="week",c="month",s="quarter",g="year",h="date",p="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var E=["th","st","nd","rd"],L=N%100;return"["+N+(E[(L-20)%10]||E[L]||E[0])+"]"}},P=function(N,E,L){var T=String(N);return!T||T.length>=E?N:""+Array(E+1-T.length).join(L)+N},O={s:P,z:function(N){var E=-N.utcOffset(),L=Math.abs(E),T=Math.floor(L/60),y=L%60;return(E<=0?"+":"-")+P(T,2,"0")+":"+P(y,2,"0")},m:function N(E,L){if(E.date()<L.date())return-N(L,E);var T=12*(L.year()-E.year())+(L.month()-E.month()),y=E.clone().add(T,c),I=L-y<0,m=E.clone().add(T+(I?-1:1),c);return+(-(T+(L-y)/(I?y-m:m-y))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:c,y:g,w:d,d:r,D:h,h:u,m:f,s:a,ms:l,Q:s}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},F="en",_={};_[F]=x;var H=function(N){return N instanceof K},q=function N(E,L,T){var y;if(!E)return F;if(typeof E=="string"){var I=E.toLowerCase();_[I]&&(y=I),L&&(_[I]=L,y=I);var m=E.split("-");if(!y&&m.length>1)return N(m[0])}else{var b=E.name;_[b]=E,y=b}return!T&&y&&(F=y),y||!T&&F},D=function(N,E){if(H(N))return N.clone();var L=typeof E=="object"?E:{};return L.date=N,L.args=arguments,new K(L)},S=O;S.l=q,S.i=H,S.w=function(N,E){return D(N,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var K=function(){function N(L){this.$L=q(L.locale,null,!0),this.parse(L)}var E=N.prototype;return E.parse=function(L){this.$d=function(T){var y=T.date,I=T.utc;if(y===null)return new Date(NaN);if(S.u(y))return new Date;if(y instanceof Date)return new Date(y);if(typeof y=="string"&&!/Z$/i.test(y)){var m=y.match(w);if(m){var b=m[2]-1||0,k=(m[7]||"0").substring(0,3);return I?new Date(Date.UTC(m[1],b,m[3]||1,m[4]||0,m[5]||0,m[6]||0,k)):new Date(m[1],b,m[3]||1,m[4]||0,m[5]||0,m[6]||0,k)}}return new Date(y)}(L),this.$x=L.x||{},this.init()},E.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},E.$utils=function(){return S},E.isValid=function(){return this.$d.toString()!==p},E.isSame=function(L,T){var y=D(L);return this.startOf(T)<=y&&y<=this.endOf(T)},E.isAfter=function(L,T){return D(L)<this.startOf(T)},E.isBefore=function(L,T){return this.endOf(T)<D(L)},E.$g=function(L,T,y){return S.u(L)?this[T]:this.set(y,L)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(L,T){var y=this,I=!!S.u(T)||T,m=S.p(L),b=function(ne,z){var X=S.w(y.$u?Date.UTC(y.$y,z,ne):new Date(y.$y,z,ne),y);return I?X:X.endOf(r)},k=function(ne,z){return S.w(y.toDate()[ne].apply(y.toDate("s"),(I?[0,0,0,0]:[23,59,59,999]).slice(z)),y)},A=this.$W,$=this.$M,V=this.$D,U="set"+(this.$u?"UTC":"");switch(m){case g:return I?b(1,0):b(31,11);case c:return I?b(1,$):b(0,$+1);case d:var Z=this.$locale().weekStart||0,se=(A<Z?A+7:A)-Z;return b(I?V-se:V+(6-se),$);case r:case h:return k(U+"Hours",0);case u:return k(U+"Minutes",1);case f:return k(U+"Seconds",2);case a:return k(U+"Milliseconds",3);default:return this.clone()}},E.endOf=function(L){return this.startOf(L,!1)},E.$set=function(L,T){var y,I=S.p(L),m="set"+(this.$u?"UTC":""),b=(y={},y[r]=m+"Date",y[h]=m+"Date",y[c]=m+"Month",y[g]=m+"FullYear",y[u]=m+"Hours",y[f]=m+"Minutes",y[a]=m+"Seconds",y[l]=m+"Milliseconds",y)[I],k=I===r?this.$D+(T-this.$W):T;if(I===c||I===g){var A=this.clone().set(h,1);A.$d[b](k),A.init(),this.$d=A.set(h,Math.min(this.$D,A.daysInMonth())).$d}else b&&this.$d[b](k);return this.init(),this},E.set=function(L,T){return this.clone().$set(L,T)},E.get=function(L){return this[S.p(L)]()},E.add=function(L,T){var y,I=this;L=Number(L);var m=S.p(T),b=function($){var V=D(I);return S.w(V.date(V.date()+Math.round($*L)),I)};if(m===c)return this.set(c,this.$M+L);if(m===g)return this.set(g,this.$y+L);if(m===r)return b(1);if(m===d)return b(7);var k=(y={},y[f]=o,y[u]=i,y[a]=n,y)[m]||1,A=this.$d.getTime()+L*k;return S.w(A,this)},E.subtract=function(L,T){return this.add(-1*L,T)},E.format=function(L){var T=this,y=this.$locale();if(!this.isValid())return y.invalidDate||p;var I=L||"YYYY-MM-DDTHH:mm:ssZ",m=S.z(this),b=this.$H,k=this.$m,A=this.$M,$=y.weekdays,V=y.months,U=function(z,X,Ne,ye){return z&&(z[X]||z(T,I))||Ne[X].slice(0,ye)},Z=function(z){return S.s(b%12||12,z,"0")},se=y.meridiem||function(z,X,Ne){var ye=z<12?"AM":"PM";return Ne?ye.toLowerCase():ye},ne={YY:String(this.$y).slice(-2),YYYY:this.$y,M:A+1,MM:S.s(A+1,2,"0"),MMM:U(y.monthsShort,A,V,3),MMMM:U(V,A),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:U(y.weekdaysMin,this.$W,$,2),ddd:U(y.weekdaysShort,this.$W,$,3),dddd:$[this.$W],H:String(b),HH:S.s(b,2,"0"),h:Z(1),hh:Z(2),a:se(b,k,!0),A:se(b,k,!1),m:String(k),mm:S.s(k,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:m};return I.replace(C,function(z,X){return X||ne[z]||m.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(L,T,y){var I,m=S.p(T),b=D(L),k=(b.utcOffset()-this.utcOffset())*o,A=this-b,$=S.m(this,b);return $=(I={},I[g]=$/12,I[c]=$,I[s]=$/3,I[d]=(A-k)/6048e5,I[r]=(A-k)/864e5,I[u]=A/i,I[f]=A/o,I[a]=A/n,I)[m]||A,y?$:S.a($)},E.daysInMonth=function(){return this.endOf(c).$D},E.$locale=function(){return _[this.$L]},E.locale=function(L,T){if(!L)return this.$L;var y=this.clone(),I=q(L,T,!0);return I&&(y.$L=I),y},E.clone=function(){return S.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},N}(),pe=K.prototype;return D.prototype=pe,[["$ms",l],["$s",a],["$m",f],["$H",u],["$W",r],["$M",c],["$y",g],["$D",h]].forEach(function(N){pe[N[1]]=function(E){return this.$g(E,N[0],N[1])}}),D.extend=function(N,E){return N.$i||(N(E,K,D),N.$i=!0),D},D.locale=q,D.isDayjs=H,D.unix=function(N){return D(1e3*N)},D.en=_[F],D.Ls=_,D.p={},D})})(ht);var un=ht.exports;const ft="activePathChanged",hn=":";function W(e){if(!(!e.file||!e.line))return`${e.file}${hn}${e.line}`}const me="sourceCodeLinkGenerated",gt="page",fn="fullPage",J=class{constructor(t,n){R(this,"_expanded",!0);R(this,"_children",[]);this._parent=t,this._element=n}static createRoot(t){const n=new J;return n.addChild(t),n}addChild(t){const n=new J(this,t);this._children.push(n),t.addEventListener(mt,()=>{let o=this;for(;o;)o._expand(),o=o._parent}),t.addEventListener(pt,()=>{n._toggleExpansionState()}),J._reportPath&&(t.addEventListener("click",()=>this._reportActivePath()),t.addEventListener(yt,()=>this._reportActivePath()))}_reportActivePath(){let t=this;if((t==null?void 0:t._element)===J._lastReportedActivePath[J._lastReportedActivePath.length-1])return;let n=[];for(;t!==void 0;)t._element&&n.unshift(t._element),t=t._parent;J._lastReportedActivePath=n.slice(),document.dispatchEvent(new CustomEvent(ft,{detail:n}))}getLastChild(){return this._children[this._children.length-1]}_isLeaf(){return this._children.length===0}_expand(){this._expanded||this._toggleExpansionState()}_toggleExpansionState(){if(!this._element||this._isLeaf())return;this._element.classList.toggle("collapsed");const t=!this._expanded;this._expanded=t;for(const n of this._children)n._toggleElementAndChildElementsVisibility(t);t?this._element.removeChild(this._element.lastChild):this._element.appendChild(document.createTextNode(" ...")),document.querySelectorAll(`.${gt}`).forEach(n=>{Array.from(n.childNodes.values()).every(o=>o.classList.contains("hidden"))?n.classList.add("hidden"):n.classList.remove("hidden")})}_toggleElementAndChildElementsVisibility(t){if(!!this._element&&(t?this._element.classList.remove("hidden"):this._element.classList.add("hidden"),!this._isLeaf()&&!!this._expanded))for(const n of this._children)n._toggleElementAndChildElementsVisibility(t)}makeExpandable(t){if(!this._element)return;const n=Array.from(this._element.childNodes.values()).reverse().find(i=>i instanceof HTMLSpanElement&&i.classList.contains("indentation"));if(n){const i=n.textContent;n.textContent="";const l=n.appendChild(document.createElement("span"));l.classList.add("expander"),l.textContent=i}else this._element.classList.add("expandable-line");t&&this._toggleExpansionState();const o=this._element;o.onclick=i=>{const l=document.getSelection(),a=(l==null?void 0:l.type)==="Range",f=this._expandableContentClicked(o,i.clientX,i.clientY);(!a&&f==="content"||f==="indentation")&&(i.preventDefault(),this._toggleExpansionState())}}_expandableContentClicked(t,n,o){var u;let i;const l=t.childNodes,a=document.createRange();for(var f=0;i=l[f],f<l.length;f++)if((i.nodeType===3||i instanceof HTMLSpanElement)&&(a.selectNodeContents(i),this._isInside(n,o,a.getBoundingClientRect())))return(u=i.classList)!=null&&u.contains("indentation")?"indentation":"content";return"none"}_isInside(t,n,o){return n>=o.top&&t<=o.right&&n<=o.bottom}};let ee=J;R(ee,"_lastReportedActivePath",[]),R(ee,"_reportPath",!1);class gn{constructor(t,n){R(this,"_result");R(this,"_currentPageElement");R(this,"_currentLineElement");R(this,"_currentParentLineTreeNode");R(this,"_lineTreeNodeStack");R(this,"_currentIndentationLevel");this._opts=t,this._api=n,this._result=document.createDocumentFragment(),this._currentPageElement=this._createPage(),this._currentLineElement=this._createLine(),this._currentParentLineTreeNode=ee.createRoot(this._currentLineElement),this._lineTreeNodeStack=[],this._currentIndentationLevel=0}addNewLine(){this._currentPageElement.appendChild(this._currentLineElement),this._currentLineElement=this._createLine(),this._currentPageElement.childNodes.length%this._opts.pageSize===0&&(this._currentPageElement.classList.add(fn),this._result.appendChild(this._currentPageElement),this._currentPageElement=this._createPage())}addNewLineIndentation(t){const n=Math.round(t.value.length/Ze);if(this._opts.renderIndentationGuides)this._addIndentationGuides(t,n);else{const o=document.createElement("span");o.textContent=t.value,this._currentLineElement.appendChild(o)}n>this._currentIndentationLevel?(this._lineTreeNodeStack.push(this._currentParentLineTreeNode),this._currentParentLineTreeNode=this._currentParentLineTreeNode.getLastChild()):n<this._currentIndentationLevel&&(this._opts.renderNodeExpansionControls&&this._currentParentLineTreeNode.makeExpandable(t.collapsed),this._currentParentLineTreeNode=this._lineTreeNodeStack.pop()),this._currentParentLineTreeNode.addChild(this._currentLineElement),this._currentIndentationLevel=n}applyExpansionForTerminator(t){this._currentIndentationLevel<1||this._opts.renderNodeExpansionControls&&this._currentParentLineTreeNode.makeExpandable(t.collapsed)}_addIndentationGuides(t,n){for(let o=0;o<n;o++){const i=document.createElement("span");i.className=t.type,i.textContent=" ".repeat(Ze),this._currentLineElement.appendChild(i)}}addNodeToCurrentLine(t){const n=vt(t,this._api);this._currentLineElement.appendChild(n)}getResult(){return this._currentLineElement.childNodes.length>0&&this._currentPageElement.appendChild(this._currentLineElement),this._currentPageElement.childNodes.length>0&&this._result.appendChild(this._currentPageElement),this._result}_createLine(){return document.createElement("p")}_createPage(){const t=document.createElement("div");return t.classList.add(gt),t}}const mt="ensureLineVisibilityRequested",pt="toggleLineExpansionRequested",yt="activePathRequested",mn=new Event(mt),pn=new Event(pt),yn=new Event(yt);function Ln(){ee._lastReportedActivePath=[]}function Lt(e,t,n,o={pageSize:100,renderIndentationGuides:!1,renderNodeExpansionControls:!1,renderBreadcrumbs:!1,renderLogEntryActions:!1,renderHighlights:!1,renderWatchView:!1,allowToMergeMultiToolLogs:!1,mergeMultiToolLogs:!1,networkLoggingAvailable:!1,networkLoggingPaused:!1}){if(ee._reportPath=o.renderBreadcrumbs,n==="preview"){const l=document.createDocumentFragment();for(const a of e)if(a.type!=="indentation"){if(a.type==="linebreak"){l.appendChild(document.createTextNode(" "));continue}l.appendChild(vt(a,t))}return l}const i=new gn(o,t);for(const l of e){if(l.type==="linebreak"){i.addNewLine();continue}else if(l.type==="indentation"){i.addNewLineIndentation(l);continue}else if(l.type==="terminator"){i.applyExpansionForTerminator(l);continue}i.addNodeToCurrentLine(l)}return i.getResult()}function vt(e,t){let n;if(e.type==="link"){const o=document.createElement("a");o.textContent=e.value,o.href="#";const i=e.stackEntry;i&&(o.onclick=l=>{l.preventDefault(),t.navigate(i.source,i.line,i.column)},document.dispatchEvent(new CustomEvent(me,{detail:{link:o,loc:{file:i.source,line:i.line}}}))),n=o}else{const o=document.createElement("span");o.className=e.type,o.textContent=e.value,n=o}return e.tooltip&&(n.title=e.tooltip),n}const Et=6.623046875,vn=6.1382352941,te="highlight",je=new RegExp(`${te}-[A-Z1-9]`,"g"),wt="loadEntryPreviewRequested",En=new Event(wt),xe="entryAddedToGroup",wn=new Event(xe),Ct="entryGroupCountUpdated",Cn=new Event(Ct),bt="expandOnLoad",Ae="showRequested",bn=new Set(["Default Light Modern","Default Dark Modern","Visual Studio Light","Visual Studio Dark","Default Light+","Default Dark+"]),Ie=navigator.platform==="Win32",xn=navigator.platform==="MacIntel",ie=xn?"Cmd":"Ctrl";function xt(e,t){if(!!e){var n=parseInt(e.substring(1,3),16),o=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16);n=n*(100+t)/100,o=o*(100+t)/100,i=i*(100+t)/100,n=n<255?n:255,o=o<255?o:255,i=i<255?i:255,n=Math.round(n),o=Math.round(o),i=Math.round(i);var l=n.toString(16).length==1?"0"+n.toString(16):n.toString(16),a=o.toString(16).length==1?"0"+o.toString(16):o.toString(16),f=i.toString(16).length==1?"0"+i.toString(16):i.toString(16);return"#"+l+a+f}}function De(e,t,n,o){return t||!o&&!n?xt(e,-35):e}function In(e){try{return e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,n,o,i)=>"#"+n+n+o+o+i+i).substring(1).match(/.{2}/g).map(t=>parseInt(t,16))}catch{return}}function Pe(e,t,n){const o=document.querySelector(":root"),i=getComputedStyle(document.documentElement);if(o){const l=o.style,a=i.getPropertyValue("--vscode-editor-foreground"),f=i.getPropertyValue("--vscode-editor-font-weight");if(!t){const s=document.body.getAttribute("data-vscode-theme-id"),g=document.body.getAttribute("data-vscode-theme-kind"),h=s&&bn.has(s),p=g==="vscode-dark",w=g==="vscode-high-contrast-light",C=g==="vscode-high-contrast";let x=De(i.getPropertyValue("--vscode-terminal-ansiGreen"),w,C,p),P=De(i.getPropertyValue("--vscode-terminal-ansiYellow"),w,C,p),O=De(i.getPropertyValue("--vscode-terminal-ansiCyan"),w,C,p),F=i.getPropertyValue("--vscode-terminal-ansiRed"),_=i.getPropertyValue("--vscode-terminal-ansiBrightBlack");F=w||!p&&!C?xt(F,-35):"#d16969",t={class:{foreground:h?p?"#4ec9b0":"#267f99":O},new:{foreground:h?p?"#569cd6":"#0000ff":O},operator:{foreground:h?p?"#d4d4d4":"#000000":void 0},string:{foreground:h?p?"#ce9178":"#a31515":x},number:{foreground:h?p?"#b5cea8":"#098658":P},boolean:{foreground:h?p?"#569cd6":"#0000ff":P},undefined:{foreground:h?p?"#569cd6":"#0000ff":_},null:{foreground:h?p?"#569cd6":"#0000ff":_},regexp:{foreground:h?p?"#d16969":"#811f3f":F},function:{foreground:h?p?"#dcdcaa":"#795e26":O},property:{foreground:h?p?"#9cdcfe":"#001080":void 0},type:{foreground:h?p?"#4ec9b0":"#267f99":O},timepoint:{foreground:h?p?"#b5cea8":"#098658":P},punctuation:{},error:{},linebreak:{},indentation:{},link:{},terminator:{},status:{},statussuccess:{},statuserror:{}}}for(const s in t){const g=t[s],h=(g==null?void 0:g.fontStyle)||"";l.setProperty(`--console-ninja-preview-${s}-foreground`,(g==null?void 0:g.foreground)||a),l.setProperty(`--console-ninja-preview-${s}-font-style`,h.includes("italic")?"italic":""),l.setProperty(`--console-ninja-preview-${s}-font-weight`,h.includes("bold")?"bold":f),l.setProperty(`--console-ninja-preview-${s}-text-decoration`,(h.includes("underline")?"underline":" ")+(h.includes("strikethrough")?"line-through":""))}const u=[],r=new Map;for(const s of n){const g=In(i.getPropertyValue(`--vscode-${s.color}`));g&&r.set(s.color,{key:s.color,rgb:g}),u.push(`.highlight-${s.key} .log-highlighter:before
        {
          content: '${s.key}';
          background-color: var(--vscode-${s.color});
        }
        .log-watch .header.highlight-${s.key}.highlight-header,
        .log-watch .header.highlight-${s.key}.highlight-header .location a {
          color: var(--vscode-${s.color}) !important;
        }`)}const d=document.createElement("style");d.id="highlightStyles",d.innerHTML=u.join(`
`);const c=document.getElementById("highlightStyles");c&&document.body.removeChild(c),document.body.appendChild(d),e.channel.api.resolveHighlightColors(Array.from(r.values()))}}function It(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function Sn(e){const t=[];return{searchText:St(e,"","",t),pathOffsets:t.filter(o=>o.path.length>0)}}async function ae(e,t){var o;Tt(e),e.searchTerm=e.search.value;const n=e.searchContext=Date.now();if(e.searchTerm.length!==0)try{e.searchLoading.classList.remove("hiddenImportant");const i=Y(e);if(e.searchResults=(t==null?void 0:t.searchResults)||(i==="logs"?re(await e.channel.api.search(e.searchTerm,e.selectedTool)):Array.from(e.watchData.entries.values()).map(l=>({id:l.entryId}))),n!==e.searchContext)return;if(t===void 0&&((o=e.focusedLogEntry)==null?void 0:o.data.id)){const l=e.focusedLogEntry.querySelector(".container");l&&!l.classList.contains("hiddenImportant")&&(t={currentMatchIdx:e.searchResults.findIndex(a=>{var f;return a.id===((f=e.focusedLogEntry)==null?void 0:f.data.id)})})}if(e.searchRegexHtmlEncoded=new RegExp(cn(It(e.searchTerm)),"ig"),e.searchResults=e.searchResults.reduce((l,a)=>{var d;const f=i==="logs"?e.logEntryList.getElementById(a.id):(d=Array.from(e.watchData.entries.values()).find(c=>c.entryId===a.id))==null?void 0:d.element;if(!f)return l;l.push(a),e.searchResultsById[a.id]=a;const u=f.querySelector(".log-message");u&&(a.summaryCount=he(u,e.searchRegexHtmlEncoded,`match-${a.id}-s-`));const r=f.querySelector(".container");return r&&(i!=="logs"||e.logEntryList.isLoaded(a.id)||r.querySelector(".error-log-message"))&&(a.detailCount=he(r,e.searchRegexHtmlEncoded,`match-${a.id}-d-`)),l},[]),e.searchResults.length){const l=(t==null?void 0:t.currentMatchIdx)&&e.searchResults[t.currentMatchIdx];e.currentMatchIdx=l?t.currentMatchIdx:0,e.currentMatchCount=0,e.searchResults[e.currentMatchIdx].detailCount||t?e.currentMatchType="detail":e.currentMatchType="summary",Se(e,t),e.previousMatch.classList.remove("disabled"),e.nextMatch.classList.remove("disabled")}else e.previousMatch.classList.add("disabled"),e.nextMatch.classList.add("disabled")}catch(i){console.error(i)}finally{if(n!==e.searchContext)return;e.searchLoading.classList.add("hiddenImportant")}}async function Tn(e,t,n){if(!e.logEntryList.isLoaded(n.id)){const o=re(await e.channel.api.getLogEntryDetails(n.id));$n(n.id,o,n.args,e,t),n.logPointId==="network"&&e.channel.api.reportNetworkLogExpanded();const i=e.searchResultsById[n.id];if(i){const l=t.querySelector(".log-details .container");i.detailCount=he(l,e.searchRegexHtmlEncoded,`match-${i.id}-d-`),e.searchResults[e.currentMatchIdx].id===n.id&&(e.currentMatchType==="summary"&&i.detailCount?Fe(e):e.currentMatchType==="detail"&&i.detailCount?(e.currentMatchCount===Number.NEGATIVE_INFINITY?e.currentMatchCount=0:e.currentMatchCount===Number.POSITIVE_INFINITY&&(e.currentMatchCount=i.detailCount-1),Se(e)):e.currentMatchCount===Number.NEGATIVE_INFINITY?Fe(e):e.currentMatchCount===Number.POSITIVE_INFINITY&&Nt(e))}}}function St(e,t,n,o){if(!e)return"";if(e.nodeType===Node.TEXT_NODE){const i=n.split("/").map(a=>parseInt(a,10));i.pop();const l=It(e.nodeValue||"");return o.push({offset:t.length,length:l.length,path:i}),t+l}else if(e.nodeType===Node.ELEMENT_NODE){const i=e;(i.tagName==="BR"||i.tagName==="P")&&(t+=`
`);let l=0;for(const a of i.childNodes)t=St(a,t,n?`${n}/${l}`:`${l}`,o),l++;(i.tagName==="BR"||i.tagName==="P")&&(t+=`
`)}return t}function Nn(e,t){let n=e;for(const o of t)n=n.childNodes[o];return n}function Tt(e){document.querySelectorAll(".find-match").forEach(t=>{t.outerHTML=t.innerHTML}),e.searchLoading.classList.add("hiddenImportant"),e.searchContext=0,e.searchResults=[],e.searchResultsById={}}function he(e,t,n){let o=0;const{searchText:i,pathOffsets:l}=Sn(e),a={};let f;for(;(f=t.exec(i))!==null;){const u=f.index,r=f[0].length,d=u+r,c=`<span class="find-match ${n}${o}">`,s="</span>";o++;const g=c.length+s.length;for(const h of l.values()){if(h.offset>d)break;if(u>h.offset+h.length)continue;const p=Nn(e,h.path);if(!p)continue;const w=a[h.path.join("/")]||0,C=Math.max(0,u-h.offset)+w,x=Math.min(p.innerHTML.length,d-h.offset)+w;x>C&&(a[h.path.join("/")]=w+g,p.innerHTML=p.innerHTML.substring(0,C)+c+p.innerHTML.substring(C,x)+s+p.innerHTML.substring(x))}}return o}function fe(e){let t=e.classList.contains("log-item")?e:e.parentElement;for(;t&&!(t!=null&&t.classList.contains("log-item"));)t=t.parentElement;if(t){const n=t.querySelector(".expander"),o=t.querySelector(".log-details .container");o?o.classList.contains("hiddenImportant")&&(n==null||n.onclick({})):t.classList.add(bt)}}function Nt(e){let t=!1,n=!1;for(;!t;){if(e.currentMatchIdx<0){if(n)return;e.currentMatchType,e.currentMatchIdx=e.searchResults.length-1,e.currentMatchCount=Number.POSITIVE_INFINITY,n=!0}e.currentMatchType==="summary"?(e.currentMatchCount===Number.POSITIVE_INFINITY?(e.currentMatchCount=e.searchResults[e.currentMatchIdx].summaryCount-1,e.searchResults[e.currentMatchIdx].detailCount!==void 0&&e.searchResults[e.currentMatchIdx].detailCount>0&&(e.currentMatchCount=-1)):e.currentMatchCount--,e.currentMatchCount>=0?t=!0:(e.currentMatchType="detail",e.currentMatchCount=Number.POSITIVE_INFINITY,e.currentMatchIdx--)):e.currentMatchType==="detail"&&(e.searchResults[e.currentMatchIdx].detailCount===void 0?e.currentMatchCount===Number.NEGATIVE_INFINITY?(e.currentMatchType="summary",e.currentMatchCount=-1,e.currentMatchIdx--):t=!0:(e.currentMatchCount===Number.NEGATIVE_INFINITY?e.currentMatchCount=0:e.currentMatchCount===Number.POSITIVE_INFINITY?e.currentMatchCount=e.searchResults[e.currentMatchIdx].detailCount-1:e.currentMatchCount--,e.currentMatchCount>=0&&e.currentMatchCount<e.searchResults[e.currentMatchIdx].detailCount?t=!0:(e.currentMatchType="summary",e.currentMatchCount=Number.POSITIVE_INFINITY)))}Se(e)}function Fe(e){var o;let t=!1,n=!1;for(;!t;){if(e.currentMatchIdx>=e.searchResults.length){if(n)return;e.currentMatchType,e.currentMatchIdx=0,e.currentMatchCount=-1,n=!0}e.currentMatchType==="summary"?(e.currentMatchCount++,e.currentMatchCount<e.searchResults[e.currentMatchIdx].summaryCount&&(e.searchResults[e.currentMatchIdx].detailCount===void 0||e.searchResults[e.currentMatchIdx].detailCount===0)?t=!0:(e.currentMatchType="detail",e.currentMatchCount=Number.NEGATIVE_INFINITY)):e.currentMatchType==="detail"&&(((o=e.searchResults[e.currentMatchIdx])==null?void 0:o.detailCount)===void 0?e.currentMatchCount===Number.POSITIVE_INFINITY?(e.currentMatchType="summary",e.currentMatchCount=-1,e.currentMatchIdx++):t=!0:(e.currentMatchCount===Number.POSITIVE_INFINITY?e.currentMatchCount=e.searchResults[e.currentMatchIdx].detailCount-1:e.currentMatchCount===Number.NEGATIVE_INFINITY?e.currentMatchCount=0:e.currentMatchCount++,e.currentMatchCount<e.searchResults[e.currentMatchIdx].detailCount?t=!0:(e.currentMatchType="summary",e.currentMatchCount=-1,e.currentMatchIdx++)))}Se(e)}function nt(e,t){const n=t.classList.contains("log-item")?t:t.closest(".log-item"),o=t.closest(".page p");o&&o.dispatchEvent(mn),B(e,n,!1)}function Se(e,t){if(document.querySelectorAll(".find-match-current").forEach(l=>{l.classList.remove("find-match-current")}),e.searchResults.length===0)return;const n=`.match-${e.searchResults[e.currentMatchIdx].id}-${e.currentMatchType==="summary"?"s":"d"}-${e.currentMatchCount}`,o=Y(e)==="logs";let i=!(t!=null&&t.searchResults);if(document.querySelectorAll(n).forEach(l=>{l.classList.add("find-match-current"),i&&(i=!1,nt(e,l),o&&fe(l),Oe(e,l))}),o&&(i||(t==null?void 0:t.searchResults))){const l=e.logEntryList.getElementById(e.searchResults[e.currentMatchIdx].id);l&&(i&&(nt(e,l),fe(l)),Oe(e,l))}}function Dt(e,t){e.autoscrollValue=t,e.autoscroll.title="Turn Auto Scrolling "+(e.autoscrollValue?"Off":"On");const n=e.autoscroll.firstChild;n.ariaLabel=e.autoscroll.title,e.autoscrollValue?(e.scrollPositionBottom=!0,n.classList.remove("codicon-unlock"),n.classList.add("codicon-lock")):(n.classList.add("codicon-unlock"),n.classList.remove("codicon-lock"))}function _t(e,t){e.autoclearValue=t,e.autoclear.title="Turn Auto Clearing After Any File Change "+(e.autoclearValue?"Off":"On");const n=e.autoclear.firstChild;n.ariaLabel=e.autoclear.title,e.autoclearValue?n.classList.add("selected-icon-state"):n.classList.remove("selected-icon-state")}function kt(e,t){e.networkLoggingPausedValue=t,e.networkLoggingPaused.title=`${e.networkLoggingPausedValue?"Resume":"Pause"} network logging`;const n=e.networkLoggingPaused.firstChild;n.ariaLabel=e.networkLoggingPaused.title,e.networkLoggingPausedValue?n.classList.remove("selected-icon-state"):n.classList.add("selected-icon-state")}function Mt(e,t,n){const o=t!=="None";e.showDateTimeValue=o,e.simpleDateTimeDisplayMode=n,n?e.showDateTime.title=`${o?"Do Not Show":"Show"} Log Entry Date and Time`:e.showDateTime.title="Change Date and Time Display Mode";const i=e.showDateTime.firstChild;i.ariaLabel=e.showDateTime.title,e.showDateTimeValue?i.classList.add("selected-icon-state"):i.classList.remove("selected-icon-state")}function Dn(e){return e==="next.js browser"||e==="remix browser"||e==="astro browser"||e==="angular browser"||e==="nest.js"?"window":e==="next.js server"||e==="remix server"||e==="astro server"||e==="angular server"?"server-environment":e==="vite"?"symbol-event":e==="webpack"?"symbol-method":e==="live-server-extension"?"broadcast":e==="jest"||e==="wallaby runner"?"beaker":e==="cypress"?"globe":e==="node"||e==="wallaby core"?"terminal":"server-process"}function _n(e){e.entryToolInserter=e.viewerOpts.mergeMultiToolLogs?(t,n)=>{const o=Dn(t.tool),i=document.createElement("span");i.title=t.tool,i.className="log-tool",n.appendChild(i),i.classList.add("codicon"),i.classList.add(`codicon-${o}`)}:()=>{}}function At(e,t,n){const o=t==="Absolute"?({ts:i})=>un(new Date(i)).format(n):t==="Relative To Oldest"?({ts:i,oldestTs:l})=>et((l>0?`${tt(i-l)}`:"").padEnd(6),6):t==="Relative To Previous"?({ts:i,previousTs:l})=>{const a=l();return et((a>0?`${tt(i-a)}`:"").padEnd(6),6)}:()=>"";e.entryDateInserter=t==="None"?()=>{}:({ts:i,oldestTs:l,previousTs:a},f)=>{const u=document.createElement("span");u.className="log-date",f.appendChild(u),u.textContent=o({ts:i,oldestTs:l,previousTs:a})}}function Pt(e,t){e.fontSize=t;const n=document.querySelector(":root");if(n){const o=n.style,i=t*14/10;e.watchMinHeight=i+9,e.watchMinWidth=100,o.setProperty("--console-ninja-logItemLocationPaddingLeft",`${t*8/10}px`),o.setProperty("--console-ninja-logDateMarginLeft",`${t*2/10}px`),o.setProperty("--console-ninja-logDateMarginRight",`${t*5/10}px`),o.setProperty("--console-ninja-logItemsFontSize",`${t}px`),o.setProperty("--console-ninja-logItemsExpanderIconFontSize",`${t*16/10}px`),o.setProperty("--console-ninja-logItemsLineHeight",`${i}px`),o.setProperty("--console-ninja-watchMinHeight",`${e.watchMinHeight}px`),o.setProperty("--console-ninja-watchMinWidth",`${e.watchMinWidth}px`),o.setProperty("--console-ninja-logItemsPageHeight",`${i*e.viewerOpts.pageSize}px`)}}function Ft(e,t){e.viewerOpts=t,e.viewerOpts.renderLogEntryActions?e.filter.classList.remove("hiddenImportant"):e.filter.classList.add("hiddenImportant"),e.viewerOpts.networkLoggingAvailable?e.networkLoggingPaused.classList.remove("hiddenImportant"):e.networkLoggingPaused.classList.add("hiddenImportant")}function B(e,t,n=!0){e.focusedLogEntry&&(e.focusedLogEntry.tabIndex=-1,e.focusedLogEntry.querySelectorAll("a").forEach(o=>o.tabIndex=-1),j(e),Fn(e,e.focusedLogEntry),t!==e.focusedLogEntry&&ge(e)),t?(e.focusedLogEntry=t,e.focusedLogEntry.tabIndex=0,e.focusedLogEntry.querySelectorAll("a:not(.not-tabable)").forEach(o=>o.tabIndex=0),n&&(e.focusedLogEntry.focus(),$t(e,t))):(e.focusedLogEntry=void 0,j(e))}function ge(e){$e(e,!1),Ln()}function $e(e,t){t?(e.breadcrumbs.classList.add("active"),e.header.classList.remove("active")):(e.breadcrumbs.classList.remove("active"),e.header.classList.add("active"))}function kn(e){return e.breadcrumbs.classList.contains("active")}function $t(e,t){if(!e.viewerOpts.renderLogEntryActions)return;const n=t.classList.contains("log-watch"),o=n?t.querySelector(".actions"):t.querySelector(".log-item-location");if(!o)return;n||(o.querySelector("a").className="log-item-location-link");let i=o.querySelector(".log-actions");i?i.classList.remove("hiddenImportant"):(n||(o.style.display="flex"),i=document.createElement("div"),i.innerHTML=`${n?`<a
        href="#"
        class="copy-action codicon codicon-copy not-tabable"
        role="button"
        tabindex="-1"
        title="Copy Log Entry To Clipboard (${ie} + C)"
      ></a>`:`<a
        href="#"
        class="expand-action codicon codicon-lightbulb not-tabable"
        role="button"
        tabindex="-1"
        title="Open Context Menu (${ie} + .)"
      ></a>`}`,i.className="log-actions",n?(i.querySelector("a.copy-action").onclick=l=>{We(e,t),l.preventDefault(),l.stopPropagation()},o.prepend(i)):(i.querySelector("a.expand-action").onclick=l=>{Rt(e,l),l.preventDefault(),l.stopPropagation()},o.appendChild(i)))}function Rt(e,t){if(e.focusedLogEntry===void 0)return;const n=e.contextWidget.querySelector("a.highlight-action");e.focusedLogEntry.classList.contains(te)?n.textContent="Unhighlight entries for this file/line":n.textContent="Highlight entries for this file/line";const o=e.contextWidget.querySelector("a.show-location-action"),i=e.contextWidget.querySelector("a.show-file-action"),l=e.contextWidget.querySelector("a.hide-location-action"),a=e.contextWidget.querySelector("a.hide-file-action"),f=e.contextWidget.querySelector("a.reset-filter-action");e.logEntryList.canAddToFilter(e.focusedLogEntry.data,"showLocation")?o.parentElement.classList.remove("hiddenImportant"):o.parentElement.classList.add("hiddenImportant"),e.logEntryList.canAddToFilter(e.focusedLogEntry.data,"showFile")?i.parentElement.classList.remove("hiddenImportant"):i.parentElement.classList.add("hiddenImportant"),e.logEntryList.canAddToFilter(e.focusedLogEntry.data,"hideLocation")?l.parentElement.classList.remove("hiddenImportant"):l.parentElement.classList.add("hiddenImportant"),e.logEntryList.canAddToFilter(e.focusedLogEntry.data,"hideFile")?a.parentElement.classList.remove("hiddenImportant"):a.parentElement.classList.add("hiddenImportant"),e.logEntryList.filter!==void 0?f.parentElement.classList.remove("hiddenImportant"):f.parentElement.classList.add("hiddenImportant"),e.contextWidget.classList.remove("hiddenImportant"),t?e.contextWidget.querySelector(".header").classList.remove("hiddenImportant"):e.contextWidget.querySelector(".header").classList.add("hiddenImportant"),e.contextWidget.querySelectorAll("li").forEach(g=>{g.classList.remove("selected")}),e.contextWidget.querySelector("a.copy-action").parentElement.classList.add("selected");const u=e.contextWidget.offsetHeight,r=10,d=(t==null?void 0:t.clientY)||e.focusedLogEntry.getBoundingClientRect().top+e.focusedLogEntry.getBoundingClientRect().height/2;e.contextWidget.style.maxHeight="unset";const c=d+u+r<e.contextWidget.parentElement.offsetHeight,s=d-u-r>0;!c&&!s&&(e.contextWidget.style.maxHeight=`${e.contextWidget.parentElement.offsetHeight}px`),e.contextWidget.style.top=`${c?d+r:s?d-u-r:0}px`,e.contextWidget.style.right=`${r*3}px`}function j(e){e.contextWidget.classList.add("hiddenImportant")}function ot(e){return!e.contextWidget.classList.contains("hiddenImportant")}async function Mn(e,t,n){if(e.codePreviewerLocation!==t)return;const o=e.codePreviewerWidget,i=await e.channel.api.highlight({file:t.file,line:t.line});if(e.codePreviewerLocation!==t||!i)return;o.onmouseover=()=>{e.codePreviewerLocation=t},o.onmouseout=()=>Re(e),o.style.left="unset",o.style.right="unset",o.innerHTML=i.text;const l=document.createElement("div");l.classList.add("file-name"),n.target instanceof HTMLAnchorElement&&(l.style.cursor="pointer",l.onclick=_=>{n.target.click(),Re(e,0),_.preventDefault(),_.stopPropagation()});let a=Vt(t.file)||"",f=e.projectFolder;a=it(a),f&&(f=it(f)),f&&(a.startsWith(f)||Ie&&a.toLowerCase().startsWith(f.toLowerCase()))&&(a=a.slice(f.length),(a.startsWith("/")||a.startsWith("\\"))&&(a=a.slice(1))),l.textContent=`${a}:${t.line}`,o.insertBefore(l,o.firstChild);const u=Array.from(o.querySelectorAll("p"));u[t.line-i.minLine].classList.add("median");const d=i.maxLine.toString().length;for(let _=0;_<u.length;_++){const H=u[_],q=_+i.minLine,D=document.createElement("span");D.classList.add("line-number"),D.textContent=`${q}`.padStart(d," "),H.insertBefore(D,H.firstChild)}const c=/^\s+/u,s=Array.from(o.querySelectorAll("span:first-child"));if(!s.some(_=>!c.test(_.textContent||""))){const _=Math.min(...s.map(H=>{if(!H.textContent)return 0;const q=H.textContent.match(c);return q?q[0].length:0}));s.forEach(H=>H.textContent=(H.textContent||"").slice(_))}o.classList.remove("hiddenImportant");const g=o.offsetHeight,h=o.offsetWidth,p=10,w=n.clientY,C=n.clientX;o.style.maxHeight="unset";const x=w+g+p<o.parentElement.offsetHeight,P=w-g-p>0;!x&&!P&&(o.style.maxHeight=`${o.parentElement.offsetHeight}px`),o.style.top=`${x?w+p:P?w-g-p:0}px`;const O=C+h<o.parentElement.offsetWidth;C-h>0?o.style.right=`${o.parentElement.offsetWidth-C}px`:O&&(o.style.left=`${C}px`)}const An=Be(Mn,100);function Pn(e,t,n){t.file&&(e.codePreviewerLocation=t,An(e,t,n))}function Re(e,t=150){e.codePreviewerLocation=void 0,t===0?e.codePreviewerWidget.classList.add("hiddenImportant"):setTimeout(()=>e.codePreviewerLocation===void 0&&e.codePreviewerWidget.classList.add("hiddenImportant"),t)}function Le(e,t,n){!e.logEntryList.canAddToFilter(t.data,n)||(e.logEntryList.addToFilter(t.data,n),e.channel.api.updateFilter(e.logEntryList.filter),G(e,e.focusedLogEntry?{id:e.focusedLogEntry.data.id}:void 0),Ye(e))}function _e(e){e.logEntryList.filter!==void 0&&(e.logEntryList.resetFilter(),e.channel.api.updateFilter(),G(e,e.focusedLogEntry?{id:e.focusedLogEntry.data.id}:void 0),Ye(e))}function Ye(e){e.logEntryList.filter!==void 0?(e.filter.classList.remove("disabled-icon-state"),e.filter.classList.add("selected-icon-state"),e.filter.title="Clear Active Filter (Shift + Escape)"):(e.filter.classList.add("disabled-icon-state"),e.filter.classList.remove("selected-icon-state"),e.filter.title="Filter (use log entry context lightbulb menu to set)")}function Fn(e,t){if(!e.viewerOpts.renderLogEntryActions||t.classList.contains("log-watch"))return;let n=t.querySelector(".log-actions");n&&n.classList.add("hiddenImportant")}function We(e,t){const n=e.logEntryList.getId(t);n&&e.channel.api.copyLogEntryDetails(n)}function Ue(e,t){e.selectedTool||(e.selectedTool=t.tool),e.viewerOpts.mergeMultiToolLogs&&(e.selectedTool=void 0),e.tools[t.tool]||(e.tools[t.tool]=!0,en(e))}function He(e){e.selectedTool&&!e.viewerOpts.mergeMultiToolLogs?e.multiToolUseDetected&&(e.logsName.innerText=e.selectedTool+" Logs"):e.logsName.innerText="Logs"}function we(e,t){let n=e.querySelector(".log-group-count");n||(n=document.createElement("span"),n.className="log-group-count",e.insertBefore(n,e.querySelector(".log-message"))),n.textContent=t?`x${t+1}`:""}function Wt(e,t,n,o,i,l,a,f,u,r,d,c,s,g,h,p,w){if(Ue(t,n),t.selectedTool&&t.selectedTool!==n.tool)return null;let C;switch(r){case"console.warn":C="warn";break;case"console.debug":C="debug";break;case"console.info":C="info";break;case"error":C="error";break}const x=document.createElement("div");x.className=`log-item${C?" "+C:""}`;const P=document.createElement("div");P.className="log-summary",P.title=h||"",x.appendChild(P);const O=document.createElement("div");O.className="expander codicon codicon-chevron-right",P.appendChild(O);const F=document.createElement("div");F.className="log-item-content",P.appendChild(F),t.entryDateInserter({ts:i,oldestTs:t.logEntryList.getFirstElementTimestamp(),previousTs:()=>{var b,k;const m=t.logEntryList.getPreviousElementIndex(o);return m>=0?(k=(b=t.logItems.children[m])==null?void 0:b.data)==null?void 0:k.ts:0}},F),t.entryToolInserter(n,F);const _=document.createElement("span");_.className="log-message log-highlighting",F.appendChild(_);const H=document.createElement("div");H.className="log-item-location",P.appendChild(H);const q=document.createElement("a");q.href="#",q.tabIndex=-1,document.dispatchEvent(new CustomEvent(me,{detail:{link:q,loc:{file:f.file.startsWith("file")||f.file.startsWith("http")?f.file:ue(f.file),line:f.line}}})),H.appendChild(q),a&&we(F,a);const D=document.createElement("div");D.className="log-details log-highlighting",x.appendChild(D);const S=document.createElement("div");S.className="container hiddenImportant",D.appendChild(S),e&&e.appendChild(x),_.appendChild(d),S.appendChild(c);const K=q;if(K.textContent=s,K.textContent.length>t.niceFileLocationLength){const m=s.length*(vn*t.fontSize/10)+8;t.niceFileLocationLength=s.length;const b=document.getElementById("styleOverride");b&&(b.innerHTML=`.log-item-width { width: ${m}px; }`)}H.classList.add("log-item-width"),K.onclick=m=>{m.preventDefault(),p()};const pe=F;pe.onclick=m=>{if(x.tabIndex===0){const b=document.getSelection();(b==null?void 0:b.type)!=="Range"&&(T(I,y),m.preventDefault(),m.stopPropagation())}},x.onclick=m=>{x.tabIndex!==0&&B(t,x),m.preventDefault(),m.stopPropagation()};function N(m){const b=m.querySelector(".expander"),k=m.querySelector(".log-details .container");return{expander:b,logDetails:k}}function E(m,b){m.classList.remove("codicon-chevron-down"),m.classList.add("codicon-chevron-right"),b.classList.add("hiddenImportant")}function L(m,b){m.classList.add("codicon-chevron-down"),m.classList.remove("codicon-chevron-right"),b.classList.remove("hiddenImportant"),w(x)}function T(m,b){b.classList.contains("hiddenImportant")?L(m,b):E(m,b)}const y=S,I=O;return Ht(t,y),I.onclick=async m=>{T(I,y),m&&m.preventDefault&&m.preventDefault()},x.onkeydown=m=>{var b,k,A;if(!y.isContentEditable){let $=null;if(m.key==="ArrowDown"||m.key==="ArrowUp")if(ot(t)){const V=t.contextWidget.querySelector(".selected");V.classList.remove("selected"),m.key==="ArrowDown"?(b=qe(V,"down"))==null||b.classList.add("selected"):m.key==="ArrowUp"&&((k=qe(V,"up"))==null||k.classList.add("selected")),(A=t.contextWidget.querySelector(".selected"))==null||A.scrollIntoView({block:"nearest"}),m.preventDefault()}else m.key==="ArrowDown"?$=x.nextElementSibling:m.key==="ArrowUp"&&($=x.previousElementSibling),$&&(B(t,$),m.preventDefault());if(m.key===" ")T(I,y),m.preventDefault();else if(m.key==="Enter")if(ot(t))t.contextWidget.querySelector(".selected a").click(),m.preventDefault();else{const V=m.target;I.classList.contains("codicon-chevron-down")&&V&&V.nodeName!=="A"&&(y.contentEditable="true",y.focus({preventScroll:!0}),t.enteredLogEntry=y,m.preventDefault())}else m.key==="ArrowRight"?(L(I,y),m.preventDefault()):m.key==="ArrowLeft"&&(m.ctrlKey||m.metaKey?document.querySelectorAll(".log-item").forEach(V=>{if(V.childElementCount){const{expander:U,logDetails:Z}=N(V);E(U,Z)}}):E(I,y),m.preventDefault());t.viewerOpts.renderLogEntryActions&&(m.metaKey||m.ctrlKey)&&m.key==="."&&(Rt(t),m.preventDefault())}},t.logEntryList.addElement({id:o,ts:i,hash:l,duplicateCount:a,...f,args:u},x),x.addEventListener(Ct,()=>{we(F,t.logEntryList.getDuplicateCount(x))}),x}function qe(e,t,n=0){if(!e||e.parentElement.childElementCount<n)return;const o=t==="down"?e.nextElementSibling||e.parentElement.firstElementChild:e.previousElementSibling||e.parentElement.lastElementChild;return o.classList.contains("hiddenImportant")?qe(o,t,++n):o}function Ht(e,t){t.onblur=()=>{t.contentEditable="false",delete e.enteredLogEntry},t.oncut=()=>!1,t.onpaste=()=>!1,t.onkeydown=n=>{var o,i,l;if(t.isContentEditable){if(n.key==="Escape"&&(t.contentEditable="false",delete e.enteredLogEntry,(o=window.getSelection())==null||o.empty(),t.closest(".log-item").focus({preventScroll:!0}),n.preventDefault(),n.stopPropagation(),ge(e)),n.key==="Enter"){const a=window.getSelection();if(a&&a.anchorNode){if(a.anchorNode.textContent){for(const f of t.querySelectorAll("a"))if((i=f.textContent)!=null&&i.includes(a.anchorNode.textContent)){f.click();break}}if(e.viewerOpts.renderNodeExpansionControls){const f=(l=a.anchorNode.parentElement)==null?void 0:l.closest(".page p");f&&f.dispatchEvent(pn)}}n.preventDefault()}n.key!=="ArrowDown"&&n.key!=="ArrowUp"&&n.key!=="ArrowLeft"&&n.key!=="ArrowRight"&&n.key!=="Home"&&n.key!=="End"&&n.key!=="PageUp"&&n.key!=="PageDown"&&n.preventDefault()}},t.onkeyup=()=>{var n,o;if(t.isContentEditable&&e.viewerOpts.renderBreadcrumbs){const i=window.getSelection(),l=(o=(n=i==null?void 0:i.focusNode)==null?void 0:n.parentElement)==null?void 0:o.closest("p");l&&l.dispatchEvent(yn)}}}function qt(e,t){if(e.selectedTool&&sn(e.selectedTool)!==t.session.tool||!t.mtime)return;const n=e.logItems.children;for(let o=n.length-1;o>=0;o--){const i=n[o];if(i.classList.contains("pre-file-change"))break;(e.logEntryList.getTimestamp(i)||0)<t.mtime&&(i.classList.add("pre-file-change"),i.classList.remove(te),i.classList.remove("checkpoint"),i.className=i.className.replace(je,""))}}function it(e){return Ie?e.replace(/\//gu,"\\"):e.replace(/\\/gu,"/")}function Vt(e){const t=new URL(e).pathname;let n=decodeURIComponent(t);return Ie&&n.startsWith("/")&&(n=n.slice(1)),n}function rt(e){if(e===void 0)return;const t=Vt(e.source);if(t!==void 0)return{file:t,line:e.line}}function Ot(e,t,n){if(e.selectedTool&&e.selectedTool!==t.session.tool||!e.logEntryList.canAdd(rt(t.stack[0]))||Ke(e,t,n))return;const o=document.createDocumentFragment(),i=document.createDocumentFragment(),l=document.createElement("span");l.className="error-log-message",l.textContent=t.message,o.appendChild(l);const a=document.createElement("span");a.className="error-log-message",a.textContent=t.message;const f=c=>{const s=document.createElement("span");return s.textContent=c,s};i.appendChild(a),t.stack.forEach(c=>{i.appendChild(document.createElement("br")),i.appendChild(f(" ")),i.appendChild(f(" "));for(let s=0;s<(c.indentation||0);s++)i.appendChild(f(" ")),i.appendChild(f(" "));if(i.appendChild(f("at")),i.appendChild(f(" ")),c.context){const s=document.createElement("span");s.className="error-context function",s.textContent=c.context.trim(),i.appendChild(s),i.appendChild(f(" "))}if(c.source){const s=document.createElement("a");s.className="error-source",s.textContent=`${Ee(c.source,50)}:${c.line}:${c.column}`,s.href="#",s.onclick=g=>{g.preventDefault(),e.channel.api.navigate(c.source,c.line,c.column)},document.dispatchEvent(new CustomEvent(me,{detail:{link:s,loc:{file:c.source,line:c.line}}})),i.appendChild(s)}});let u="",r="";t.stack.length&&(u=Ee(t.stack[0].source)+":"+t.stack[0].line+":"+t.stack[0].column,r=t.stack[0].source+":"+t.stack[0].line+":"+t.stack[0].column);const d=Wt(n,e,t.session,t.id,t.ts,t.hash,void 0,rt(t.stack[0])||{file:"",line:0},void 0,"error",o,i,u,r,void 0,()=>{t.stack.length&&e.channel.api.navigate(t.stack[0].source,t.stack[0].line,t.stack[0].column)},()=>{});d&&d.addEventListener(xe,()=>{we(d.querySelector(".log-item-content"),e.logEntryList.incrementDuplicateCount(d))}),le(e),ce(e,e.logItems.lastElementChild)}async function $n(e,t,n,o,i){o.logEntryList.setLoaded(e);const l=i.querySelector(".log-details .container"),a=zt(o,t,n);l==null||l.replaceChildren(),l==null||l.appendChild(a)}function zt(e,t,n){const o=document.createDocumentFragment();if(n.length===t.length)n.forEach((i,l)=>{if(t[l]){if(i.context){const u=document.createElement("p");u.className="log-context",u.textContent=`${i.context}:`,o.appendChild(u)}const a=Lt(t[l],e.channel.api,"details",e.viewerOpts),f=document.createElement("div");f.className="log-text",f.appendChild(a),o.appendChild(f)}});else{const i=document.createElement("span");i.className="error-log-message",i.textContent="Log details are no longer available.",o.appendChild(i)}return o}function Rn(){return`<div class="log-watch log-items log-item log-details log-highlighting" tabIndex=0>
  <div class="content-container">
    <div class="header">
      <div class="context"></div>
      <div class="location"></div>
      <div class="actions">
        <a class="codicon codicon-close not-tabable" href="#" tabindex="-1" title="Close (${ie} + W)"></a>
      </div>
    </div>
    <div class="container"></div>
  </div>
  <div class="resizer top-left"></div>
  <div class="resizer top-right"></div>
  <div class="resizer bottom-left"></div>
  <div class="resizer bottom-right"></div>
  <div class="resizer top"></div>
  <div class="resizer bottom"></div>
  <div class="resizer left"></div>
  <div class="resizer right"></div>
</div>`}let oe=100;function Bt(e,t){let n=0,o=0,i=0,l=0,a=!1;e.classList.add("draggable"),e.onmousedown=d,t.onmousedown=f;function f(c){a=!0,d(),i=c.clientX,l=c.clientY,document.onmouseup=r,document.onmousemove=u,document.onmouseenter=s=>{a&&s.buttons!==1&&r(s)},c.preventDefault()}function u(c){n=i-c.clientX,o=l-c.clientY,i=c.clientX,l=c.clientY,e.style.top=e.offsetTop-o+"px",e.style.left=e.offsetLeft-n+"px",c.preventDefault(),c.stopPropagation()}function r(c){a=!1,document.onmouseup=null,document.onmousemove=null,document.onmouseleave=null,c.preventDefault()}function d(c){oe++,e.style.zIndex=""+oe,oe>1e4&&(oe=100),c==null||c.preventDefault()}}function Wn(e,t){e.classList.remove("draggable"),e.onmousedown=null,t.onmousedown=null}function jt(e,t){e.classList.add("resizable");const n=e.querySelectorAll(".resizer"),o=20;let i=0,l=0,a=0,f=0,u=0,r=0;for(let d=0;d<n.length;d++){let c=function(h){if(g.classList.contains("top")){const p=l-(h.pageY-r);p>o&&(e.style.height=p+"px",e.style.top=f+(h.pageY-r-t)+"px")}else if(g.classList.contains("bottom")){const p=l+(h.pageY-r);p>o&&(e.style.height=p+"px")}else if(g.classList.contains("left")){const p=i-(h.pageX-u);p>o&&(e.style.width=p+"px",e.style.left=a+(h.pageX-u)+"px")}else if(g.classList.contains("right")){const p=i+(h.pageX-u);p>o&&(e.style.width=p+"px")}else if(g.classList.contains("bottom-right")){const p=i+(h.pageX-u),w=l+(h.pageY-r);p>o&&(e.style.width=p+"px"),w>o&&(e.style.height=w+"px")}else if(g.classList.contains("bottom-left")){const p=l+(h.pageY-r),w=i-(h.pageX-u);p>o&&(e.style.height=p+"px"),w>o&&(e.style.width=w+"px",e.style.left=a+(h.pageX-u)+"px")}else if(g.classList.contains("top-right")){const p=i+(h.pageX-u),w=l-(h.pageY-r);p>o&&(e.style.width=p+"px"),w>o&&(e.style.height=w+"px",e.style.top=f+(h.pageY-r-t)+"px")}else{const p=i-(h.pageX-u),w=l-(h.pageY-r);p>o&&(e.style.width=p+"px",e.style.left=a+(h.pageX-u)+"px"),w>o&&(e.style.height=w+"px",e.style.top=f+(h.pageY-r-t)+"px")}h.preventDefault()},s=function(){window.removeEventListener("mousemove",c)};const g=n[d];e.appendChild(g),g.addEventListener("mousedown",function(h){h.preventDefault(),i=parseFloat(getComputedStyle(e,null).getPropertyValue("width").replace("px","")),l=parseFloat(getComputedStyle(e,null).getPropertyValue("height").replace("px","")),a=e.getBoundingClientRect().left,f=e.getBoundingClientRect().top,u=h.pageX,r=h.pageY,window.addEventListener("mousemove",c),window.addEventListener("mouseup",s)})}}function Hn(e){e.classList.remove("resizable")}function Ce(e,t){e.watchesContainer.removeChild(t.element),e.channel.api.closeWatch(t.location),e.watchData.entries.delete(W(t.location)),Te(e),e.watchData.entries.size===0&&(e.logView.click(),Xe(e))}function Yt(e,t,n){const o=t.querySelector(".location"),i=`${Ee(n.file)}:${n.line}`;o.replaceChildren();const l=document.createElement("a");l.href="#",l.textContent=i,l.onclick=a=>{a.preventDefault(),e.channel.api.navigate(ue(n.file),n.line)},document.dispatchEvent(new CustomEvent(me,{detail:{link:l,loc:{file:n.file.startsWith("file")||n.file.startsWith("http")?n.file:ue(n.file),line:n.line}}})),o.appendChild(l)}function qn(e,t,n){const o=t.querySelector(".context");o.textContent=n.join(", ")}function be(e,t){if(!t){e.watchData.entries.forEach(l=>{be(e,l.location)});return}const n=W(t);if(!n)return;const o=e.watchData.entries.get(n);if(!o)return;const i=e.logEntryList.getHighlight(t);i?(o.header.classList.add(Qt(i.key)),o.header.classList.add("highlight-header")):Je(o.header)}async function Ut(e,t){var r;const n=W(t);if(!n)return;const o=await e.channel.api.getLogEntryDataWithDetails(t);if(!o)return;const i=o.logEntry,l=re(o.details);let a=e.watchData.entries.get(n);a||(a=Bn(e,i),e.watchData.entries.set(n,a),Te(e),Yt(e,a.header,t),be(e,t),Xe(e)),a.entryId=i.id,a.element.data={...i,ts:0,index:0};const f=i.args?i.args.length>1?i.args:[{context:void 0}]:[],u=zt(e,l,f);a.details.replaceChildren(u),$t(e,a.element),qn(e,a.header,((r=i.args)==null?void 0:r.map(d=>d.context||"").filter(d=>d))||[])}function Vn(e){return e.logs.classList.contains("hiddenImportant")?e.watchesContainer.offsetHeight:e.logsContainer.offsetHeight}function On(e){return e.logs.classList.contains("hiddenImportant")?e.watchesContainer.offsetWidth:e.logsContainer.offsetWidth}function Te(e){e.watches.querySelectorAll(".layout-resizer").forEach(c=>c.remove());const t=Array.from(e.watchData.entries.values()),n=100/t.length;let o=0;const i=e.orientation==="vertical",l=i?(c,s)=>{c.top=s}:(c,s)=>{c.left=s},a=i?(c,s)=>{c.left=s}:(c,s)=>{c.top=s},f=i?(c,s)=>{c.bottom=s}:(c,s)=>{c.right=s},u=i?(c,s)=>{c.right=s}:(c,s)=>{c.bottom=s},r=i?(c,s)=>{c.width=s}:(c,s)=>{c.height=s},d=i?(c,s)=>{c.height=s}:(c,s)=>{c.width=s};if(e.watchData.layout==="manual")for(let c=0;c<t.length;c++){const s=t[c];if(s.layoutApplied){o+=n/2;continue}l(s.element.style,o+"%"),f(s.element.style,"unset"),a(s.element.style,Math.random()*10+c/2*(25*Math.random())/t.length+"%"),u(s.element.style,"unset"),r(s.element.style,85-c*25*Math.random()/t.length+"%"),d(s.element.style,n-5+"%"),o+=n,Bt(s.element,s.header),jt(s.element,e.watches.offsetTop),s.layoutApplied=!0}else if(e.watchData.layout==="auto"){const c=i?100*e.watchMinHeight/Vn(e):100*e.watchMinWidth/On(e),s=[],g=[],h=[];for(let w=0;w<t.length;w++){const C=t[w];let x;C.defaultSizeChangeFactor!==1?x=n*C.defaultSizeChangeFactor:x=n,s.push({percent:x}),x<c?g.push(s[w]):C.defaultSizeChangeFactor>1&&h.push(s[w])}const p=g.reduce((w,C)=>{const x=c-C.percent;return C.percent=c,w+x},0);if(p>0&&h.length>0){const w=p/h.length;for(let C=0;C<h.length;C++)h[C].percent-=w}for(let w=0;w<t.length;w++){const C=t[w];l(C.element.style,o===0?"1px":o+"%"),o+=s[w].percent,f(C.element.style,w===t.length-1?"0":100-o+"%"),a(C.element.style,"1px"),u(C.element.style,i?"1px":"0px"),r(C.element.style,"unset"),d(C.element.style,"unset"),Wn(C.element,C.header),Hn(C.element),C.layoutApplied=!0,w>0&&e.watches.appendChild(zn(t[w-1],C,i))}}}function zn(e,t,n){const o=document.createElement("div");o.className="layout-resizer",n?o.style.top=t.element.style.top:o.style.left=t.element.style.left,o.onmousedown=a;let i=0,l;function a(r){l={e:r,offset:n?o.offsetTop+o.offsetHeight/2:o.offsetLeft+o.offsetWidth/2,firstSize:n?e.element.offsetHeight:e.element.offsetWidth,secondSize:n?t.element.offsetHeight:t.element.offsetWidth,parentSize:n?o.parentElement.offsetHeight:o.parentElement.offsetWidth,minSize:n?e.header.offsetHeight:Number(window.getComputedStyle(e.element,null).getPropertyValue("min-width").replace("px",""))+5},document.onmousemove=f,document.onmouseup=d=>{document.onmousemove=document.onmouseup=null,i!==0&&(e.defaultSizeChangeFactor=(l.firstSize+i)/l.firstSize,t.defaultSizeChangeFactor=(l.secondSize-i)/l.secondSize),d.preventDefault()},r.preventDefault()}function f(r){i=n?r.clientY-l.e.clientY:r.clientX-l.e.clientX,i=Math.min(Math.max(i,-l.firstSize+l.minSize),l.secondSize-l.minSize);const d=u(l.offset+i),c=100-d;n?(o.style.top=t.element.style.top=d+"%",e.element.style.bottom=c+"%"):(o.style.left=t.element.style.left=d+"%",e.element.style.right=c+"%"),r.preventDefault()}function u(r){return 100*(r/l.parentSize)}return o}function Bn(e,t){let n,o=document.createElement("div");o.innerHTML=Rn(),o=o.childNodes[0];const i=o.querySelector(".container");oe++,o.style.zIndex=""+oe;const l=o.querySelector(".header");Bt(o,l),jt(o,e.watches.offsetTop);const a=l.querySelector(".actions .codicon-close");return a.onclick=u=>{Ce(e,n),u.preventDefault()},o.onclick=u=>{B(e,o),u.stopPropagation(),u.preventDefault()},o.onkeydown=u=>{if(!i.isContentEditable){let r=null;if(u.key==="ArrowDown"||u.key==="ArrowUp"||u.key==="ArrowLeft"||u.key==="ArrowRight")e.orientation==="vertical"&&u.key==="ArrowDown"||e.orientation==="horizontal"&&u.key==="ArrowRight"?r=o.nextElementSibling:(e.orientation==="vertical"&&u.key==="ArrowUp"||e.orientation==="horizontal"&&u.key==="ArrowLeft")&&(r=o.previousElementSibling),r&&B(e,r);else if(u.key==="w"&&(u.ctrlKey||u.metaKey)){const d=o.nextElementSibling||o.previousElementSibling;Ce(e,n),d&&B(e,d),u.preventDefault(),u.stopPropagation()}else if(u.key==="Enter"){const d=u.target;d&&d.nodeName!=="A"&&(i.contentEditable="true",i.focus({preventScroll:!0}),e.enteredLogEntry=i,u.preventDefault())}}},Ht(e,i),n={element:o,header:l,details:i,location:t,defaultSizeChangeFactor:1,entryId:t.id,layoutApplied:!1,order:e.watchData.entries.size},e.watchesContainer.appendChild(o),n}function jn(e,{file:t,lineMap:n,deletedLines:o}){let i=!1;Object.entries(n).forEach(([l,a])=>{const f=Number(l),u=W({file:t,line:f});if(!u)return;let r;const d=W({file:t,line:a});d&&(r=e.watchData.entries.get(d),e.watchData.entries.delete(d)),r&&(e.watchData.entries.set(u,r),i=!0,r.location.line=f,Yt(e,r.header,r.location))}),o.forEach(l=>{const a=W({file:t,line:l});if(!a)return;const f=e.watchData.entries.get(a);f&&Ce(e,f)}),i&&(e.watchData.entries=new Map([...e.watchData.entries].sort(([,l],[,a])=>l.order-a.order)))}function lt(e,t){const n=e.watchData.layout;if(e.watchData.layout=t,n!==t){e.watchData.entries.forEach(i=>{i.layoutApplied=!1}),Te(e),e.watchesLayout.title=`Switch To ${t==="auto"?"Manual":"Automatic"} Value Layout Mode`;const o=e.watchesLayout.firstChild;o.ariaLabel=e.watchesLayout.title,t==="auto"?o.classList.add("selected-icon-state"):o.classList.remove("selected-icon-state")}}function Y(e){return e.currentView}function ct(e){e.watchData.entries.forEach(t=>{Ce(e,t)})}function Yn(e){const t=e.logItems.lastElementChild;!Kt(t)||(t==null||t.classList.add("checkpoint"),ce(e,t))}function Kt(e){return e?!e.classList.contains("checkpoint"):!1}function ce(e,t){Kt(t)?e.addCheckpoint.classList.remove("disabled-icon-state"):e.addCheckpoint.classList.add("disabled-icon-state")}function Gt(e,t,n){if(Ue(e,t.session),e.selectedTool&&e.selectedTool!==t.session.tool||!e.logEntryList.canAdd(t)||Ke(e,t,n))return;const o=document.createElement("div");o.className="log-item",o.style.height=`${e.logItemHeight}px`,o.addEventListener(xe,()=>e.logEntryList.incrementDuplicateCount(o)),o.addEventListener(wt,()=>{const i=Xt(e,t,void 0,o);if(!i)return;if(e.searchResultsById[t.id]&&Y(e)==="logs"){const u=e.searchResultsById[t.id],r=i.querySelector(".log-message");u.summaryCount=he(r,e.searchRegexHtmlEncoded,`match-${u.id}-s-`),e.searchResults[e.currentMatchIdx].id===t.id&&fe(r);const d=i.querySelector(".log-details .container");d&&(e.logEntryList.isLoaded(u.id)||d.querySelector(".error-log-message"))&&(u.detailCount=he(d,e.searchRegexHtmlEncoded,`match-${u.id}-d-`))}const l=o===e.focusedLogEntry,a=o.classList.contains("pre-file-change"),f=o.classList.contains(bt);o.replaceWith(i),l&&!e.searchTerm&&B(e,i),a&&i.classList.add("pre-file-change"),f&&fe(i)},{once:!0}),n.appendChild(o),e.logEntryList.addElement(t,o),le(e),ce(e,e.logItems.lastElementChild)}function Ke(e,t,n){const o=n.lastElementChild;return t.hash&&e.logEntryList.getHash(o)===t.hash?(o.dispatchEvent(wn),!0):!1}function Xt(e,t,n,o){if(e.selectedTool&&e.selectedTool!==t.session.tool){Ue(e,t.session);return}if(!e.logEntryList.canAdd(t))return;const i=n===void 0;let l;if(!i&&Ke(e,t,n))return;i&&o&&(l=e.logEntryList.getDuplicateCount(o));const a=document.createDocumentFragment(),f=document.createDocumentFragment();let u;t.args.forEach((s,g)=>{if(g>0){const h=document.createElement("span");h.textContent=", ",a.appendChild(h)}if(s.context){u&&u.length?u+=`, ${s.context}`:u=`Context: ${s.context}`;const h=document.createElement("span");h.textContent=`${s.context}: `;const p=h.textContent.length*(Et*e.fontSize/10),w=Math.ceil(p/50)*50;h.className=`context ${w<1e3?`width-${w}`:"too-large"}`,a.appendChild(h)}a.appendChild(Lt(s.preview,e.channel.api,"preview"))});const r=document.createElement("div");r.className="details-loading-indicator codicon codicon-loading",f.appendChild(r);const d=Ee(t.file),c=Wt(n,e,t.session,t.id,t.ts,t.hash,l,t,t.args,t.logPointSource,a,f,d+":"+t.line,t.file+":"+t.line,u,async()=>{e.channel.api.navigate(ue(t.file),t.line)},async s=>{Tn(e,s,t)});return c&&(c.addEventListener(xe,()=>{we(c.querySelector(".log-item-content"),e.logEntryList.incrementDuplicateCount(c))}),e.lastLogEntryWithPreviewLoaded=c),le(e),ce(e,e.logItems.lastElementChild),c}function Ve(e){Ge(e,!0);const t=e.logItems.lastElementChild;if(!t)e.scrollPositionBottom=!0;else{const n=e.logsContainer.getBoundingClientRect(),o=t.getBoundingClientRect();e.scrollPositionBottom=o.bottom-20<=n.bottom}}function Ge(e,t=!1){const n=e.logEntryList.getIndex(e.lastLogEntryWithPreviewLoaded),o=t&&e.lastLogsContainerScrollTop!==void 0&&e.logsContainer.scrollTop<e.lastLogsContainerScrollTop||n===e.logEntryList.size()-1,i=e.logsContainer.getBoundingClientRect(),l=i.top,a=i.bottom,f=[],u=e.logItems.children,r=s=>{const g=s.getBoundingClientRect(),h=g.height*80;if(g.top<a+h&&g.bottom+h>l)return!0},d=(s,g)=>{const h=u[s];if(!h||h.childElementCount>0)return!0;const p=h.getBoundingClientRect();if(r(h))f.push(h);else if(g&&p.bottom<l||!g&&p.top>a)return!1;return!0},c=n!==void 0?n:o?u.length-1:0;for(let s=c;s>=0&&d(s,!0);s--);for(let s=c;s<u.length&&d(s,!1);s++);for(const s of f)s.dispatchEvent(En);e.lastLogsContainerScrollTop=e.logsContainer.scrollTop}async function G(e,t){let n="logs",o=!1;e.loadingIndicator.classList.remove("hiddenImportant"),e.noLogItemsPlaceholder.classList.add("hiddenImportant");try{de(e),e.logItems.classList.add("hiddenImportant"),e.logItems.replaceChildren(),e.focusedLogEntry=void 0,e.niceFileLocationLength=0,e.logEntryList.clear(),e.tools={},en(e);const{logViewerEntries:l,autoScroll:a,autoClear:f,tokens:u,theme:r,defaultView:d,highlightStyles:c,selection:s,dateTimeFormat:g,fontSize:h,viewerOpts:p,highlights:w,watches:C,dateTimeDisplayMode:x,simpleDateTimeDisplayMode:P,showSearchHint:O,showLogViewerProHint:F,projectFolder:_}=await e.channel.api.initialize();if(e.projectFolder=_,t=t||s,n=d,e.showSearchHint=O,e.showSearchHint&&e.hintFind.classList.remove("hiddenImportant"),e.showLogViewerProHint=F,e.showLogViewerProHint&&e.hintLogViewerPro.classList.remove("hiddenImportant"),r!==document.body.getAttribute("data-vscode-theme-id")){const{tokens:S,highlightStyles:K}=await e.channel.api.stylesChanged(document.body.getAttribute("data-vscode-theme-id"));Pe(e,S,K)}else Pe(e,u,c);if(p.renderHighlights)for(const S of w)e.logEntryList.toggleHighlight(S);ve(e),Dt(e,a),o=a,_t(e,f),kt(e,p.networkLoggingPaused),Mt(e,x,P),At(e,x,g),Pt(e,h),Ft(e,p);const H=re(l);let q;const D=document.createDocumentFragment();if(H.forEach(S=>{S.type=="log"?Gt(e,S.log,D):S.type==="error"?Ot(e,S.error,D):S.type==="fileChange"&&S.fileChange.mtime&&(q=S.fileChange)}),e.logItems.appendChild(D),q&&qt(e,q),p.renderWatchView){e.watchesView.classList.remove("hiddenImportant");for(const S of C)Ut(e,S)}else e.watchesView.classList.add("hiddenImportant")}finally{le(e),ce(e,e.logItems.lastElementChild),Xe(e),n==="logs"?(e.logView.click(),Jt(e,t,o)):e.watchesView.click(),e.currentView=n}}function Jt(e,t,n=e.autoclearValue){let o;e.logItems.classList.remove("hiddenImportant"),e.loadingIndicator.classList.add("hiddenImportant"),t!==void 0&&(o=e.logEntryList.getElementById(t.id)),o===void 0&&(n?(o=e.logItems.lastElementChild,e.logsContainer.scrollTop=e.logsContainer.scrollHeight):o=e.logItems.firstElementChild),o&&(o.tabIndex=0),o&&B(e,o),o&&t&&Zt(e,o,t),Ve(e)}function Zt(e,t,n){n.expand&&fe(t),n.search&&(e.filterFind.classList.remove("hiddenImportant"),e.filterFind.title=`Remove Search Filter: ${n.search.context}`,e.search.value=n.search.term,ze(e),ae(e,{searchResults:n.search.results,currentMatchIdx:Math.max(n.search.results.findIndex(o=>o.id===n.id),0)}))}function Un(e){const t=document.createElement("div");t.classList.add("log-item"),t.style.visibility="hiddenImportant",t.textContent="&nbsp;",e.logItems.appendChild(t);const n=e.logItems.classList.contains("hiddenImportant");n&&e.logItems.classList.remove("hiddenImportant"),e.logItemHeight=t.getBoundingClientRect().height,e.logItems.removeChild(t),n&&e.logItems.classList.add("hiddenImportant")}function le(e){e.logItems.childElementCount===0?e.noLogItemsPlaceholder.classList.remove("hiddenImportant"):e.noLogItemsPlaceholder.classList.add("hiddenImportant")}function Xe(e){e.watchData.entries.size===0?e.noWatchItemsPlaceholder.classList.remove("hiddenImportant"):e.noWatchItemsPlaceholder.classList.add("hiddenImportant")}function ke(e){const t=e.orientation;Y(e)==="logs"&&(e.logsContainer.style.height=e.logs.clientHeight+"px",e.logsContainer.style.width=e.logs.clientWidth+"px"),e.orientation=Kn(e.mainContainer.clientWidth,e.mainContainer.clientHeight),t!==e.orientation&&(e.mainContainer.classList.remove(t),e.mainContainer.classList.add(e.orientation),Te(e))}const st=Be(e=>{const t=Math.floor((e.mainContainer.clientWidth-50)/(Math.ceil(Et)*e.fontSize/10));t&&e.channel.api.updatePreferredFormattingOptions({maxLineLength:Math.max(t,30)})});function Kn(e,t){return e>1.8*t?"horizontal":"vertical"}let Q;function Gn(e){if(Q&&clearTimeout(Q),e.focusedLogEntry){const t=e.focusedLogEntry;Q=setTimeout(()=>{Q&&clearTimeout(Q),t&&t===e.focusedLogEntry&&(e.focusedLogEntry.tabIndex=0,e.focusedLogEntry.querySelectorAll("a:not(.not-tabable)").forEach(n=>n.tabIndex=0),e.focusedLogEntry.focus({preventScroll:!0}),e.findWidget.classList.contains("visible")&&e.search.focus())},120)}}function Xn(e){Q&&clearTimeout(Q),e.focusedLogEntry&&document.activeElement===e.focusedLogEntry&&(e.focusedLogEntry.tabIndex=-1,e.focusedLogEntry.querySelectorAll("a").forEach(t=>t.tabIndex=-1),e.focusedLogEntry.blur()),j(e),ge(e)}function de(e){Tt(e),e.searchTerm="",e.filterFind.classList.add("hiddenImportant"),e.findWidget.classList.remove("visible"),e.findWidget.classList.remove(Ae),e.focusedLogEntry&&e.focusedLogEntry.focus(),setTimeout(()=>{e.findWidget.classList.contains(Ae)||e.findWidget.classList.add("hiddenImportant")},500)}const Jn=Be(e=>{const t=Math.max(e.logItems.childElementCount+e.logEntryList.getTotalDuplicateCount()-e.maxElementCount,0);if(t===0)return;const n=e.logEntryList.removeFirstElementsAndGroups(t);n!==0&&(e.logItems.replaceChildren(...Array.from(e.logItems.children).slice(n)),Ge(e))},250);function at(e,t,n,o){e.maxElementCount=t,Jn(e),o&&(!n&&(e.logsContainer.scrollHeight<=e.logsContainer.clientHeight||!e.autoscrollValue||e.autoclearValue&&!e.scrollPositionBottom||e.searchTerm)&&Ge(e),e.autoscrollValue&&e.searchTerm===""&&e.scrollPositionBottom&&(e.logsContainer.scrollTop=e.logsContainer.scrollHeight))}function Oe(e,t){const n=t.getBoundingClientRect(),o=Y(e)==="logs",i=o?e.logsContainer:t.closest(".container"),l=i.getBoundingClientRect();if(!(n.top>=l.top&&n.bottom<=l.bottom-10&&n.left>=l.left&&n.right<=l.right-10)){if(n.top<l.top||n.bottom>l.bottom-10){let a=n.top-l.top+i.scrollTop-n.height*2;a<l.height/2&&(a=0),i.scrollTo({top:a,behavior:"auto"})}if(n.left<l.left||n.right>l.right-10){let a=t.parentElement;for(;a&&!a.classList.contains("log-details");)a=a.parentElement;if(o||(a=i),a){const f=a.getBoundingClientRect();let u=n.left-f.left+a.scrollLeft-10;u+n.width+10<f.width&&(u=0),a.scrollTo({left:u,behavior:"auto"})}}}}function Me(e,t){t.enteredLogEntry&&Ie||(e.stopPropagation(),e.preventDefault())}function Zn(e){return e<=25}function dt(e){e.onPreAddLogOrErrorEntry&&(e.onPreAddLogOrErrorEntry(),delete e.onPreAddLogOrErrorEntry)}function ze(e){return e.findWidget.classList.contains("hiddenImportant")?(e.findWidget.classList.remove("hiddenImportant"),e.findWidget.classList.add(Ae),setTimeout(()=>{e.findWidget.classList.add("visible"),e.search.focus()},0),!0):!1}function Je(e){e.classList.remove(te),e.className=e.className.replace(je,"")}function Qt(e){return`${te}-${e}`}function ut(e,t){if(e.classList.contains("pre-file-change"))return Je(e),!1;const n=e.classList.toggle(te);if(e.classList.contains(te)){e.classList.add(Qt(t));const o=e.querySelector(".log-item-content");if(!o)return!1;let i=o.querySelector(".log-highlighter");i||(i=document.createElement("span"),i.className="log-highlighter",o.insertBefore(i,o.querySelector(".log-group-count")||o.querySelector(".log-message")))}else e.className=e.className.replace(je,"");return n}function ve(e){e.logEntryList.hasHighlights()?e.removeHighlights.classList.remove("hiddenImportant"):e.removeHighlights.classList.add("hiddenImportant")}function en(e){const t=Object.keys(e.tools),n=t.length>1;if(e.multiToolUseDetected=e.multiToolUseDetected||n,He(e),_n(e),e.multiToolUseDetected&&!e.viewerOpts.mergeMultiToolLogs?e.logActionsDropdown.style.display="inline-block":e.selectedTool===void 0&&(e.logActionsDropdown.style.display="none"),Y(e)!=="logs"||!e.viewerOpts.allowToMergeMultiToolLogs||!e.multiToolUseDetected&&!e.viewerOpts.mergeMultiToolLogs)e.multiToolDisplayMode.classList.add("hiddenImportant");else{const o=t.join(t.length>2?", ":" and ");e.multiToolDisplayMode.classList.remove("hiddenImportant");const i=e.multiToolDisplayMode.firstChild;e.viewerOpts.mergeMultiToolLogs?(i.classList.add("selected-icon-state"),e.multiToolDisplayMode.title=`Show logs from ${o} separately (dedicated list per tool)`):(i.classList.remove("selected-icon-state"),e.multiToolDisplayMode.title=`Show logs from ${o} in one list`)}}function Qn(e){return"detail"in e}function eo(){const e=Qe.exports.useRef(null),t=document.createElement("style");return t.id="styleOverride",t.innerHTML=".log-item-width { width: 0px; }",document.body.appendChild(t),Qe.exports.useLayoutEffect(()=>{e.current={showSearchHint:!1,showLogViewerProHint:!1,simpleDateTimeDisplayMode:!1,currentView:"logs",root:document.querySelector("#root"),mainContainer:document.querySelector(".main-container"),breadcrumbs:document.querySelector(".breadcrumbs"),header:document.querySelector(".header-content"),views:document.querySelector(".views"),logView:document.querySelector(".log-view"),watchesView:document.querySelector(".watches-view"),logs:document.querySelector(".logs"),logsContainer:document.querySelector(".logs-container"),logItems:document.querySelector(".log-items"),loadingIndicator:document.querySelector(".loading-indicator"),noLogItemsPlaceholder:document.querySelector(".no-log-items-placeholder"),noWatchItemsPlaceholder:document.querySelector(".no-watch-items-placeholder"),watches:document.querySelector(".watches"),watchesContainer:document.querySelector(".watches-container"),search:document.querySelector(".search-input"),searchLoading:document.querySelector(".search-loading"),regularExpression:document.querySelector(".use-regular-expression"),matchWholeWorld:document.querySelector(".match-whole-word"),matchCase:document.querySelector(".match-case"),hintLogViewerPro:document.querySelector(".viewer-pro-hint"),autoscroll:document.querySelector(".auto-scroll"),autoclear:document.querySelector(".auto-clear"),networkLoggingPaused:document.querySelector(".network-logging"),showDateTime:document.querySelector(".show-date"),filter:document.querySelector(".filter"),watchesLayout:document.querySelector(".toggle-watches-layout-mode"),multiToolDisplayMode:document.querySelector(".toggle-multitool-display-mode"),multiToolUseDetected:!1,removeHighlights:document.querySelector(".remove-highlights"),addCheckpoint:document.querySelector(".add-checkpoint"),autoscrollValue:!0,autoclearValue:!0,networkLoggingPausedValue:!1,showDateTimeValue:!0,fontSize:10,watchMinHeight:23,watchMinWidth:100,logSelector:document.querySelector(".log-selector"),logSelectorOverlay:document.querySelector(".log-selector-overlay"),logActionsDropdown:document.querySelector(".logs-action-dropdown"),logsName:document.querySelector(".logs-action-text"),tools:{},selectedTool:void 0,niceFileLocationLength:0,findWidget:document.querySelector(".find-widget"),matchesCount:document.querySelector(".matches-count"),previousMatch:document.querySelector(".find-previous"),nextMatch:document.querySelector(".find-next"),closeFind:document.querySelector(".find-close"),hintFind:document.querySelector(".find-hint"),filterFind:document.querySelector(".find-filter"),searchTerm:"",searchContext:0,searchRegexHtmlEncoded:/''/g,searchResults:[],searchResultsById:{},scrollPositionBottom:!0,currentMatchIdx:0,currentMatchType:"summary",currentMatchCount:0,totalMatches:0,onPreAddLogOrErrorEntry:void 0,channel:new on(window,rn,{addLogEntries:async r=>{dt(e.current);const d=re(r),c=Zn(d.entries.length),s=Y(e.current)==="logs";c&&s?d.entries.forEach(g=>Xt(e.current,g,e.current.logItems)):d.entries.forEach(g=>Gt(e.current,g,e.current.logItems)),at(e.current,d.totalNumberOfLogsAndErrors,c,s)},addErrorEntries:async r=>{dt(e.current);const d=re(r);d.entries.forEach(c=>Ot(e.current,c,e.current.logItems)),at(e.current,d.totalNumberOfLogsAndErrors,!0,Y(e.current)==="logs")},addFileChange:async r=>{qt(e.current,r)},clear:async r=>{const d=c=>{e.current.logItems.replaceChildren(),e.current.focusedLogEntry=void 0,c?le(e.current):setTimeout(()=>le(e.current),400),ce(e.current,e.current.logItems.lastElementChild),e.current.tools={},e.current.niceFileLocationLength=0,e.current.logEntryList.clear(),de(e.current)};r==="immediately"?(e.current.onPreAddLogOrErrorEntry&&(e.current.onPreAddLogOrErrorEntry(),delete e.current.onPreAddLogOrErrorEntry),d(!0),ct(e.current)):r==="onNewLogOrError"&&(e.current.onPreAddLogOrErrorEntry=d)},autoScrollChanged:async r=>{Dt(e.current,r)},autoClearChanged:async r=>{_t(e.current,r)},pauseNetworkLoggingChanged:async r=>{kt(e.current,r)},dateTimeFormatChanged:async({dateTimeFormat:r,dateTimeDisplayMode:d,simpleDateTimeDisplayMode:c})=>{Mt(e.current,d,c),At(e.current,d,r),G(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0)},fontSizeChanged:async r=>{Pt(e.current,r)},viewerOptsChanged:async r=>{Ft(e.current,r),G(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0)},select:async r=>{const d=e.current.logEntryList.getElementById(r.id);d!==void 0&&(d.tabIndex=0,B(e.current,d),Ve(e.current),Zt(e.current,d,r))},toggleHighlight:async r=>{const d=e.current.logEntryList.toggleHighlight(r);d&&B(e.current,d),ve(e.current),be(e.current,r.location)},removeAllHighlights:async()=>{e.current.logEntryList.removeAllHighlights(),ve(e.current),be(e.current)},updateFileHighlights:async r=>{e.current.logEntryList.updateFileHighlights(r),ve(e.current)},updateWatchValue:async r=>{Ut(e.current,r)},updateFileWatches:async r=>{jn(e.current,r)},customizeWatchesLayout:async()=>{lt(e.current,e.current.watchData.layout==="auto"?"manual":"auto")},openTab:async r=>{Y(e.current)!==r&&(r==="logs"?e.current.logView.click():e.current.watchesView.click())},updateFilter:async r=>{e.current.logEntryList.updateFilter(r)&&G(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0),Ye(e.current)},addLogViewerCheckpoint:async()=>{Yn(e.current)},reloadLogEntries:async()=>{G(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0)}}),logEntryList:new to,lastLogsContainerScrollTop:void 0,lastLogEntryWithPreviewLoaded:void 0,logItemHeight:0,maxElementCount:1/0,entryDateInserter:()=>{},entryToolInserter:()=>{},viewerOpts:{pageSize:100,renderIndentationGuides:!1,renderNodeExpansionControls:!1,renderBreadcrumbs:!1,renderLogEntryActions:!1,renderHighlights:!1,renderWatchView:!1,allowToMergeMultiToolLogs:!1,mergeMultiToolLogs:!1,networkLoggingAvailable:!1,networkLoggingPaused:!1},watchData:{entries:new Map,layout:"auto"},orientation:"vertical",contextWidget:document.querySelector(".context-actions-widget"),codePreviewerWidget:document.querySelector(".code-previewer-widget"),codePreviewerLocation:void 0,projectFolder:void 0},e.current.mainContainer.onkeydown=r=>{var d;if(r.metaKey||r.ctrlKey)r.key==="f"?ze(e.current)&&(r.stopPropagation(),r.preventDefault()):r.key==="c"&&e.current.focusedLogEntry&&e.current.viewerOpts.renderLogEntryActions&&!((d=window.getSelection())!=null&&d.toString())&&(We(e.current,e.current.focusedLogEntry),r.stopPropagation(),r.preventDefault());else if(r.key==="Escape")(e.current.findWidget.classList.contains("visible")||!e.current.contextWidget.classList.contains("hiddenImportant"))&&(de(e.current),j(e.current),r.stopPropagation(),r.preventDefault());else if(r.key==="End")e.current.enteredLogEntry||B(e.current,e.current.logItems.lastElementChild),Me(r,e.current);else if(r.key==="Home")e.current.enteredLogEntry||B(e.current,e.current.logItems.firstElementChild),Me(r,e.current);else if(r.key==="PageDown"||r.key==="PageUp"){const c=e.current.focusedLogEntry;if(c&&!e.current.enteredLogEntry){const s=e.current.logItems,g=c.getBoundingClientRect().height,h=e.current.logsContainer.getBoundingClientRect().height,p=e.current.logEntryList.getIndex(c)||0,w=s.childElementCount;let C=p;r.key==="PageDown"?C+=Math.floor(h/g):C-=Math.floor(h/g),C<0?C=0:C>=w&&(C=w-1);const x=s.children[C];B(e.current,x)}Me(r,e.current)}},e.current.closeFind.onclick=r=>{de(e.current)},e.current.search.onkeydown=async r=>{r.key==="Escape"?(de(e.current),r.preventDefault(),r.stopPropagation()):r.shiftKey&&r.key==="Enter"?e.current.previousMatch.click():r.key==="Enter"&&(e.current.searchTerm!==e.current.search.value?ae(e.current):e.current.nextMatch.click())},e.current.previousMatch.onclick=r=>{e.current.searchTerm!==e.current.search.value&&ae(e.current),e.current.previousMatch.classList.contains("disabled")||Nt(e.current),e.current.search.focus()},e.current.nextMatch.onclick=r=>{e.current.searchTerm!==e.current.search.value&&ae(e.current),e.current.nextMatch.classList.contains("disabled")||Fe(e.current),e.current.search.focus()},e.current.contextWidget.onmouseover=r=>{var c;const d=r.target&&r.target;if(d){const s=d.tagName==="li"?d:d.closest("li");(c=s==null?void 0:s.parentElement)==null||c.querySelectorAll("li").forEach(g=>{g.classList.remove("selected")}),s==null||s.classList.add("selected")}},e.current.mainContainer.onclick=r=>{if(r.target&&r.target.tagName&&r.target.tagName.toLowerCase()!=="a"&&!r.target.classList.contains("layout-resizer")){const d=Y(e.current);d==="logs"?e.current.logView.focus():d==="watches"&&e.current.watchesView.focus(),r.stopPropagation(),r.preventDefault()}j(e.current)},window.addEventListener("resize",()=>{ke(e.current),st(e.current)}),window.addEventListener("focus",()=>Gn(e.current)),window.addEventListener("blur",()=>Xn(e.current)),window.addEventListener("keydown",r=>{r.shiftKey&&r.key==="Escape"&&_e(e.current)}),document.addEventListener(me,r=>{if(Qn(r)){const{link:d,loc:c}=r.detail;d.onmouseover=s=>Pn(e.current,{file:c.file.startsWith("file")||c.file.startsWith("http")?c.file:ue(c.file),line:c.line},s),d.onmouseout=()=>Re(e.current)}}),ke(e.current),st(e.current);const n=r=>{!r||(r.onclick=()=>{r.classList.toggle("checked"),e.current.search.focus()},r.onkeydown=d=>{(d.key==="Enter"||d.key===" ")&&r.classList.toggle("checked")})};n(e.current.regularExpression),n(e.current.matchWholeWorld),n(e.current.matchCase);const o=()=>{e.current.views.querySelectorAll("li").forEach(r=>{var c,s;r.classList.remove("checked"),r.tabIndex=-1;const d=(s=(c=r.querySelector("a"))==null?void 0:c.getAttribute("aria-label"))==null?void 0:s.toLowerCase();if(d){const g=document.getElementById(d);g&&g.classList.add("hiddenImportant")}})},i=()=>{const r=Object.keys(e.current.tools);if(r.length>1){if(e.current.viewerOpts.mergeMultiToolLogs)return;e.current.logSelector.replaceChildren(),e.current.focusedLogEntry=void 0,r.sort((g,h)=>g.localeCompare(h)),r.forEach(g=>{let h=e.current.logSelector.appendChild(document.createElement("div"));h.outerHTML=`<div class='log-selector-item'>${g} Logs</div>`,h=e.current.logSelector.lastChild,h.dataset.tool=g,g==e.current.selectedTool&&h.classList.add("active"),h.onclick=()=>{e.current.selectedTool=g,He(e.current),G(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0),e.current.logSelector.style.display="none",e.current.logSelectorOverlay.style.display="none"},h.onmouseover=()=>{e.current.logSelector.querySelectorAll(".log-selector-item").forEach(p=>{p!==h?p.classList.remove("active"):p.classList.add("active")})}});const c=e.current.logView.querySelector("a").getBoundingClientRect();e.current.logSelector.style.left=c.left+"px",e.current.logSelector.style.top=c.bottom-5+"px",e.current.logSelector.style.minWidth=c.width+"px",e.current.logSelector.style.display="block",e.current.logSelector.focus();const s=e.current.logView.getBoundingClientRect();e.current.logSelectorOverlay.style.left=s.left+"px",e.current.logSelectorOverlay.style.top=s.top+"px",e.current.logSelectorOverlay.style.width=s.width+"px",e.current.logSelectorOverlay.style.height=s.height+"px",e.current.logSelectorOverlay.style.display="block"}},l=r=>{var c,s;r.classList.add("checked"),r.tabIndex=0;const d=(s=(c=r.querySelector("a"))==null?void 0:c.getAttribute("aria-label"))==null?void 0:s.toLowerCase();if(d){const g=document.getElementById(d);g&&g.classList.remove("hiddenImportant")}},a=(r,d)=>{var g,h;const c=(h=(g=r.querySelector("a"))==null?void 0:g.getAttribute("aria-label"))==null?void 0:h.toLowerCase();if(e.current.currentView=c,c===d)return;const s=`${c}-only`;e.current.mainContainer.querySelectorAll(".menu-entry").forEach(p=>{p.classList.contains(s)?p.classList.remove("hiddenForCurrentView"):p.className.includes("-only")&&p.classList.add("hiddenForCurrentView")}),ke(e.current),c==="logs"?(Jt(e.current),e.current.channel.api.openedView("logs")):e.current.channel.api.openedView("watches")};e.current.views.querySelectorAll("li").forEach(r=>{r.onblur=()=>{r.classList.remove("focused")},r.onfocus=()=>{r.classList.add("focused")},r.onkeydown=d=>{var g,h;const c=(g=r.parentElement)==null?void 0:g.querySelector(".focused"),s=(h=r.parentElement)==null?void 0:h.querySelector(".checked");if(d.key==="Enter"||d.key===" "){const p=Y(e.current);o(),l(c),c===s&&s===e.current.logView&&i(),a(c,p),d.preventDefault()}else d.key==="ArrowRight"?c!=null&&c.nextElementSibling&&(c.classList.remove("focused"),c.nextElementSibling.classList.add("focused"),d.preventDefault()):d.key==="ArrowLeft"&&c!=null&&c.previousElementSibling&&(c.classList.remove("focused"),c.previousElementSibling.classList.add("focused"),d.preventDefault())},r.onclick=d=>{const c=Y(e.current);r===e.current.logView&&!(d.screenX===0&&d.screenY===0)&&i(),o(),l(r),a(r,c),d.preventDefault(),d.stopPropagation()}}),e.current.logSelector.onkeydown=r=>{if(r.key==="Escape")e.current.logSelector.style.display="none",e.current.logSelectorOverlay.style.display="none",r.preventDefault(),r.stopPropagation(),e.current.logView.focus();else if(r.key===" "||r.key==="Enter"){const d=e.current.logSelector.querySelector(".active");d&&d.dataset.tool&&(e.current.logSelector.style.display="none",e.current.logSelectorOverlay.style.display="none",r.preventDefault(),e.current.logView.focus(),e.current.selectedTool=d.dataset.tool,He(e.current),G(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0))}else if(r.key==="ArrowDown"){const d=e.current.logSelector.querySelector(".active");d!=null&&d.nextElementSibling&&(d.classList.remove("active"),d.nextElementSibling.classList.add("active"))}else if(r.key==="ArrowUp"){const d=e.current.logSelector.querySelector(".active");d!=null&&d.previousElementSibling&&(d.classList.remove("active"),d.previousElementSibling.classList.add("active"))}},e.current.logSelector.onblur=r=>{e.current.logSelector.style.display="none",e.current.logSelectorOverlay.style.display="none"},e.current.logsContainer.onscroll=()=>Ve(e.current),Un(e.current),G(e.current),lt(e.current,"auto");const f=r=>{if(!e.current.viewerOpts.renderBreadcrumbs)return;const d=r.detail,c=e.current.breadcrumbs;if(d.length>1){const s=[];d.forEach((g,h)=>{var C;const p=((C=g.textContent)==null?void 0:C.trimStart().replace(/:[^:]*$/,"").replace(/[\s\{\[\:]+$/g,""))||(h===0?"root":"..."),w=document.createElement("div");if(w.classList.add("breadcrumb"),w.textContent=p,w.onclick=()=>{const x="standout",P="standout-remove";g.classList.add(x),B(e.current,g.closest(".log-item")),Oe(e.current,g.querySelector(".expander")||g.querySelector("span")),setTimeout(()=>{g.classList.add(P),g.classList.remove(x),setTimeout(()=>{g.classList.remove(P)},500)},3e3)},s.push(w),h<d.length-1){const x=document.createElement("div");x.classList.add("codicon","codicon-chevron-right"),s.push(x)}else{const x=document.createElement("div");x.classList.add("actions","codicon","codicon-close"),x.onclick=()=>{ge(e.current)},s.push(x)}}),c.replaceChildren(...s)}else c.replaceChildren();if(c.hasChildNodes()){let s=function(g){if(!!kn(e.current)){if(g.offsetParent===null){ge(e.current);return}setTimeout(()=>s(g),400)}};$e(e.current,!0),s(d[0])}else $e(e.current,!1)};document.addEventListener(ft,f),new MutationObserver(r=>{r.forEach(d=>{d.type==="attributes"&&d.attributeName==="data-vscode-theme-id"&&(async()=>{const{tokens:c,highlightStyles:s}=await e.current.channel.api.stylesChanged(document.body.getAttribute("data-vscode-theme-id"));Pe(e.current,c,s)})()})}).observe(document.body,{attributes:!0,attributeFilter:["data-vscode-theme-id"]})}),M(ln,{children:[v("div",{className:"log-selector-overlay",tabIndex:0}),v("div",{className:"log-selector",tabIndex:0}),M("div",{className:"find-widget hiddenImportant",children:[v("div",{className:"find-widget-sash"}),v("div",{className:"findInput",children:M("div",{className:"container",children:[v("input",{className:"search-input",type:"text",placeholder:"Find"}),v("div",{title:"Loading",className:"search-loading codicon codicon-loading hiddenImportant","aria-label":"Loading"})]})}),v("a",{title:"Previous Match (\u21E7Enter)",className:"button find-previous codicon codicon-arrow-up disabled"}),v("a",{title:"Next Match (Enter)",className:"button find-next codicon codicon-arrow-down disabled"}),v("a",{title:"Remove Search Filter",className:"button find-filter action-label selected-icon-state codicon codicon-filter hiddenImportant",onClick:()=>{e.current.filterFind.classList.add("hiddenImportant"),ae(e.current)}}),v("a",{title:"Close (Escape)",className:"button find-close codicon codicon-close"}),v("a",{title:"Show Quick Search Hint",href:"command:console-ninja.openHint?"+encodeURIComponent(JSON.stringify("Search")),className:"button find-hint codicon codicon-lightbulb hiddenImportant",onClick:()=>{e.current.showSearchHint=!1,e.current.hintFind.classList.add("hiddenImportant")}})]}),v("div",{className:"code-previewer-widget hiddenImportant"}),M("div",{className:"context-actions-widget hiddenImportant",children:[M("div",{className:"header subtle hiddenImportant",children:[ie," + . to open | Esc to close"]}),M("ul",{children:[M("li",{className:"selected",onClick:n=>{e.current.focusedLogEntry&&We(e.current,e.current.focusedLogEntry),j(e.current),n.preventDefault(),n.stopPropagation()},children:[v("span",{className:"codicon codicon-copy"}),M("a",{href:"#",className:"copy-action not-tabable",tabIndex:-1,title:`Copy Log Entry To Clipboard (${ie} + C)`,children:[v("span",{className:"",children:"Copy to clipboard"})," ",M("span",{className:"subtle",children:[ie," + C"]})]})]}),M("li",{onClick:n=>{if(e.current.focusedLogEntry){const o=e.current.focusedLogEntry;e.current.channel.api.toggleLineHighlight({line:o.data.line,file:o.data.file,useOriginalLocation:!0})}j(e.current),n.preventDefault(),n.stopPropagation()},children:[v("span",{className:"codicon codicon-star-full"}),v("a",{href:"#",className:"highlight-action not-tabable",tabIndex:-1,title:"Toggle Highlight Entries For This Location",children:"Highlight entries for this file/line"})]}),M("li",{onClick:n=>{e.current.focusedLogEntry&&Le(e.current,e.current.focusedLogEntry,"showLocation"),j(e.current),n.preventDefault(),n.stopPropagation()},children:[v("span",{className:"codicon codicon-filter-filled"}),v("a",{href:"#",className:"show-location-action not-tabable",tabIndex:-1,title:"Show Entries For This Location Only",children:"Show entries for this file/line only"})]}),M("li",{onClick:n=>{e.current.focusedLogEntry&&Le(e.current,e.current.focusedLogEntry,"showFile"),j(e.current),n.preventDefault(),n.stopPropagation()},children:[v("span",{className:"codicon codicon-filter-filled"}),v("a",{href:"#",className:"show-file-action not-tabable",tabIndex:-1,title:"Show Entries For This File Only",children:"Show entries for this file only"})]}),M("li",{onClick:n=>{e.current.focusedLogEntry&&Le(e.current,e.current.focusedLogEntry,"hideLocation"),j(e.current),n.preventDefault(),n.stopPropagation()},children:[v("span",{className:"codicon codicon-filter-filled"}),v("a",{href:"#",className:"hide-location-action not-tabable",tabIndex:-1,title:"Hide Entries For This Location",children:"Hide entries for this file/line"})]}),M("li",{onClick:n=>{e.current.focusedLogEntry&&Le(e.current,e.current.focusedLogEntry,"hideFile"),j(e.current),n.preventDefault(),n.stopPropagation()},children:[v("span",{className:"codicon codicon-filter-filled"}),v("a",{href:"#",className:"hide-file-action not-tabable",tabIndex:-1,title:"Hide Entries For This File",children:"Hide entries for this file"})]}),M("li",{onClick:n=>{_e(e.current),j(e.current),n.preventDefault(),n.stopPropagation()},children:[v("span",{className:"codicon codicon-filter"}),M("a",{href:"#",className:"reset-filter-action not-tabable",tabIndex:-1,title:"Reset filter",children:["Reset filter ",v("span",{className:"subtle",children:"Shift + Escape"})]})]})]})]}),M("div",{className:"main-container vertical",role:"none",children:[M("div",{className:"header",children:[v("div",{className:"breadcrumbs"}),M("div",{className:"header-content active",children:[v("div",{className:"views",children:M("ul",{className:"actions-container",role:"tablist","aria-label":"Active View Switcher",children:[M("li",{className:"log-view action-item checked",role:"tab","aria-label":"Logs",tabIndex:0,children:[v("a",{className:"action-label","aria-label":"Logs",children:M("div",{className:"logs-action",children:[v("div",{className:"logs-action-text",children:"Logs"}),v("div",{className:"codicon codicon-chevron-down logs-action-dropdown",style:{display:"none"}})]})}),v("div",{className:"active-item-indicator"})]}),M("li",{className:"watches-view action-item hiddenImportant",role:"tab","aria-label":"Watches",tabIndex:0,children:[v("a",{className:"action-label","aria-label":"Watches",children:v("div",{className:"watches-action",children:v("div",{className:"watches-action-text",children:"Values"})})}),v("div",{className:"active-item-indicator"})]})]})}),v("div",{className:"spacer"}),M("ul",{className:"actions",children:[v("li",{className:"viewer-pro-hint action-item menu-entry logs-only hiddenImportant",role:"presentation",title:"Check out Log Viewer PRO features",children:v("a",{href:"command:console-ninja.openHint?"+encodeURIComponent(JSON.stringify("LogViewer")),onClick:()=>{e.current.showLogViewerProHint=!1,e.current.hintLogViewerPro.classList.add("hiddenImportant")},className:"action-label codicon codicon-lightbulb pro-hint",role:"button","aria-label":"Check out Log Viewer PRO features",tabIndex:-1})}),v("li",{className:"toggle-multitool-display-mode action-item menu-entry logs-only hiddenImportant",role:"presentation",title:"Toggle Multi-Tool Display Mode",children:v("a",{href:"command:console-ninja.toggleMultiToolDisplayMode",className:"action-label codicon codicon-merge",role:"button","aria-label":"Toggle Multi-Tool Display Mode",tabIndex:-1})}),v("li",{className:"toggle-watches-layout-mode action-item menu-entry watches-only hiddenForCurrentView",role:"presentation",title:"Switch To Manual Value Layout Mode",children:v("a",{className:"action-label selected-icon-state codicon codicon-layout",href:"command:console-ninja.customizeWatchesLayout",role:"button","aria-label":"Switch To Manual Value Layout Mode",tabIndex:-1})}),v("li",{className:"remove-highlights action-item menu-entry hiddenImportant",role:"presentation",title:"Remove All Highlights",children:v("a",{href:"command:console-ninja.removeAllHighlights",className:"action-label codicon codicon-star-half selected-icon-state",role:"button","aria-label":"Clear All Highlights",tabIndex:-1})}),v("li",{className:"action-item menu-entry watches-only hiddenForCurrentView",role:"presentation",title:"Close All Values",children:v("a",{onClick:n=>{ct(e.current),n.preventDefault(),n.stopPropagation()},className:"action-label codicon codicon-close-all",role:"button","aria-label":"Close All Values",tabIndex:-1})}),v("li",{className:"action-item menu-entry logs-only",role:"presentation",title:"Clear Output",children:v("a",{href:"command:console-ninja.clearOutput",className:"action-label codicon codicon-clear-all",role:"button","aria-label":"Clear Output",tabIndex:-1})}),v("li",{className:"add-checkpoint action-item menu-entry logs-only disabled-icon-state",role:"presentation",title:"Add Checkpoint (horizontal separator between current and new log entries)",children:v("a",{href:"command:console-ninja.addLogViewerCheckpoint",className:"action-label codicon codicon-symbol-snippet",role:"button","aria-label":"Add Checkpoint",tabIndex:-1})}),v("li",{className:"network-logging action-item menu-entry logs-only hiddenImportant",role:"presentation",title:"Toggle Network Logging",children:v("a",{href:"command:console-ninja.toggleNetworkRequestLogging",className:"action-label codicon codicon-broadcast",role:"button","aria-label":"Toggle Network Logging",tabIndex:-1})}),v("li",{className:"show-date action-item menu-entry logs-only",role:"presentation",title:"Change Date and Time Display Mode",children:v("a",{href:"command:console-ninja.changeDateTimeDisplayMode",onClick:n=>{const o=e.current;o.channel.api.changeDateTimeDisplayMode(o.simpleDateTimeDisplayMode?o.showDateTimeValue?"None":"Absolute":void 0),n.preventDefault(),n.stopPropagation()},className:"action-label codicon codicon-watch",role:"button","aria-label":"Change Date and Time Display Mode",tabIndex:-1})}),v("li",{className:"auto-clear action-item menu-entry logs-only",role:"presentation",title:"Turn Auto Clearing After Any File Change Off",children:v("a",{href:"command:console-ninja.toggleLogViewerAutoClear",className:"action-label codicon codicon-refresh",role:"button","aria-label":"Turn Auto Clearing After Any File Change Off",tabIndex:-1})}),v("li",{className:"filter action-item menu-entry logs-only disabled-icon-state hiddenImportant",role:"presentation",title:"Filter (use log entry context lightbulb menu to set)",children:v("a",{className:"action-label codicon codicon-filter",role:"button","aria-label":"Filter (use log entry context lightbulb menu to set)",tabIndex:-1,onClick:n=>{_e(e.current),n.preventDefault(),n.stopPropagation()}})}),v("li",{className:"auto-scroll action-item menu-entry log-only",role:"presentation",title:"Turn Auto Scrolling Off",children:v("a",{href:"command:console-ninja.toggleLogViewerAutoScroll",className:"action-label codicon codicon-unlock",role:"button","aria-label":"Turn Auto Scrolling Off",tabIndex:-1})}),v("li",{className:"action-item menu-entry",role:"presentation",title:"Search (Ctrl/Cmd + F)",children:v("a",{onClick:n=>{ze(e.current),n.preventDefault(),n.stopPropagation()},className:"action-label codicon codicon-search action-item-search",role:"button","aria-label":"Search",tabIndex:-1})}),v("li",{className:"action-item menu-entry",role:"presentation",title:"Open Ninja Settings",children:v("a",{href:`command:workbench.action.openSettings?${encodeURIComponent(JSON.stringify("@ext:wallabyjs.console-ninja"))}`,className:"action-label codicon codicon-settings",role:"button","aria-label":"Open Ninja Settings",tabIndex:-1})})]})]})]}),v("div",{id:"logs",className:"logs",children:M("div",{className:"logs-container",children:[v("div",{className:"log-items"}),v("div",{className:"loading-indicator codicon codicon-loading hiddenImportant"}),v("div",{className:"no-log-items-placeholder hiddenImportant",children:"no logs available"})]})}),M("div",{id:"watches",className:"watches hiddenImportant",children:[v("div",{className:"watches-container"}),v("div",{className:"no-watch-items-placeholder",children:"no watched values"})]})]})]})}class to{constructor(){R(this,"_loadedDetails");R(this,"_elements");R(this,"_index");R(this,"_indexShift");R(this,"_totalDuplicateCount");R(this,"_elementsByLocation",new Map);R(this,"_highlights",new Map);R(this,"_filter",{isActive:!1,showFiles:new Set,hideFiles:new Set,showLocations:new Set,hideLocations:new Set});R(this,"_onElementAdded",()=>{});R(this,"_firstElementTs",0);this.clear()}size(){return this._elements.size}loadedDetails(){return this._loadedDetails}removeFirstElementsAndGroups(t){let n=0;if(t>0){for(const o of this._elements.keys()){const i=this._elements.get(o),l=i.data.duplicateCount;if(l){const a=Math.min(l,t);if(this._totalDuplicateCount-=a,t-=a,i.data.duplicateCount-=a,i.data.duplicateCount||delete i.data.duplicateCount,t===0){i.dispatchEvent(Cn);break}}if(t--,this._deleteElement(i),n++,t===0)break}this._indexShift+=n,this._reIndexIfRequired()}return n}_reIndexIfRequired(){if(this._indexShift++,this._index>=Number.MAX_SAFE_INTEGER-1e3){this._indexShift=0,this._index=0;for(const t of this._elements.values())t.data.index=this._index++}}_deleteElement(t){const n=t.data.id,o=W(t.data);if(this._elements.delete(n),delete this._loadedDetails[n],!o)return;const i=this._elementsByLocation.get(o);i&&i.delete(n)}clear(){this._loadedDetails={},this._elements=new Map,this._elementsByLocation=new Map,this._index=0,this._indexShift=0,this._totalDuplicateCount=0,this._onElementAdded=t=>{this._firstElementTs=t.data.ts,this._onElementAdded=()=>{}}}isLoaded(t){return!!this._loadedDetails[t]}setLoaded(t){this._loadedDetails[t]=1}getElementById(t){return this._elements.get(t)}addElement({id:t,ts:n,hash:o,duplicateCount:i,file:l,line:a,args:f},u){const r=u,d=this._elements.get(t);this._elements.set(t,r);const c=d?d.data.index:this._index++;r.data={id:t,ts:n,index:c,hash:o,duplicateCount:i,file:l,line:a,args:f},this._onElementAdded(r);const s=W(r.data);if(!s)return;const g=this._elementsByLocation.get(s);if(g)g.set(t,r);else{const p=new Map;p.set(t,r),this._elementsByLocation.set(s,p)}const h=this._highlights.get(s);h&&ut(r,h.key)}getIndex(t){if(!t)return;const n=t;if(!!n.data)return n.data.index-this._indexShift}getElementWithData(t){return t||void 0}getTimestamp(t){var o;return t?(o=t.data)==null?void 0:o.ts:void 0}getPreviousElementIndex(t){const n=this._elements.get(t);return(n?n.data.index-1:this._index)-this._indexShift}getFirstElementTimestamp(){return this._firstElementTs}getHash(t){var o;return t?(o=t.data)==null?void 0:o.hash:void 0}getId(t){var o;return t?(o=t.data)==null?void 0:o.id:void 0}getDuplicateCount(t){var o;return t?(o=t.data)==null?void 0:o.duplicateCount:void 0}getTotalDuplicateCount(){return this._totalDuplicateCount}incrementDuplicateCount(t){if(!t)return 0;const n=t;return n.data.duplicateCount?n.data.duplicateCount++:n.data.duplicateCount=1,this._totalDuplicateCount++,n.data.duplicateCount}getHighlight(t){const n=W(t);if(!!n)return this._highlights.get(n)}toggleHighlight(t){var l;const n=W(t.location);if(!n||(this._highlights.get(n)?this._highlights.delete(n):this._highlights.set(n,t),this._elementsByLocation.size===0))return;let i;for(const a of((l=this._elementsByLocation.get(n))==null?void 0:l.values())||[])ut(a,t.key)&&(i=a);return i}removeAllHighlights(){for(const t of this._elementsByLocation.values())for(const n of t.values())Je(n);this._highlights.clear()}hasHighlights(){return this._highlights.size>0}updateFileHighlights({file:t,lineMap:n,deletedLines:o}){Object.entries(n).forEach(([i,l])=>{const a=Number(i),f=W({file:t,line:a});if(!f)return;let u;const r=W({file:t,line:l});r&&(u=this._highlights.get(r),u&&(this._highlights.delete(r),this._highlights.set(f,u)))}),o.forEach(i=>{const l=W({file:t,line:i});!l||this._highlights.delete(l)})}canAdd(t){return!0}_canAdd(t){if(t===void 0)return!0;if(this._filter.hideFiles.has(t.file)||this._filter.showFiles.size>0&&!this._filter.showFiles.has(t.file))return!1;const n=W(t);return!(this._filter.hideLocations.has(n)||this._filter.showLocations.size>0&&!this._filter.showLocations.has(n))}addToFilter(t,n){switch(this.canAdd=this._canAdd.bind(this),this._filter.isActive=!0,n){case"showLocation":this._filter.showLocations.add(W(t));break;case"showFile":this._filter.showFiles.add(t.file);break;case"hideLocation":this._filter.hideLocations.add(W(t));break;case"hideFile":this._filter.hideFiles.add(t.file);break}}canAddToFilter(t,n){if(this._filter.showLocations.size)return!1;if(n==="showFile"||n==="hideFile"){if(this._filter.hideFiles.has(t.file)||this._filter.showFiles.has(t.file))return!1}else if(n==="showLocation"||n==="hideLocation"){const o=W(t);if(this._filter.showLocations.has(o)||this._filter.hideLocations.has(o))return!1}return!0}updateFilter({file:t,lineMap:n,deletedLines:o}){let i=!1;return Object.entries(n).forEach(([l,a])=>{const f=Number(l),u=W({file:t,line:f});if(!u)return;const r=W({file:t,line:a});r&&(this._filter.showLocations.has(r)&&(this._filter.showLocations.delete(r),this._filter.showLocations.add(u)),this._filter.hideLocations.has(r)&&(this._filter.hideLocations.delete(r),this._filter.hideLocations.add(u)))}),o.forEach(l=>{const a=W({file:t,line:l});!a||(i=this._filter.showLocations.delete(a)||i,this._filter.hideLocations.delete(a))}),this._filter.showFiles.size===0&&this._filter.hideFiles.size===0&&this._filter.showLocations.size===0&&this._filter.hideLocations.size===0&&this.resetFilter(),i}resetFilter(){this._filter.isActive=!1,this._filter.hideFiles.clear(),this._filter.hideLocations.clear(),this._filter.showFiles.clear(),this._filter.showLocations.clear(),this.canAdd=()=>!0}get filter(){if(!!this._filter.isActive)return{showFiles:Array.from(this._filter.showFiles),hideFiles:Array.from(this._filter.hideFiles),showLocations:Array.from(this._filter.showLocations),hideLocations:Array.from(this._filter.hideLocations)}}}an.render(v(eo,{}),document.getElementById("root"));
